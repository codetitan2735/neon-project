(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5390],{41725:function(t,e,r){"use strict";r.d(e,{JG:function(){return u.calculateNumberOfPrizesForIndex},KW:function(){return u.calculatePrizeForDistributionIndex},vD:function(){return E},Lu:function(){return L},n5:function(){return j},UO:function(){return l}});var n=r(95129),a=r(8198),i=r(64353),s=r(48171),o=r(64594),u=r(6933),c=r(91747),p=r(21046),f=(r(35332),function(t,e,r){return new n.CH(t,e,r)});function d(t){return new a.vU(t)}var h;function l(t){return Array.from(new Set(t.map((function(t){return t.chainId}))))}function w(t,e){return function(t,e){return t.filter((function(t){return t.type===e}))}(t,e).map((function(e){return[e].concat(function(t,e){var r,n=null==(r=t.extensions)?void 0:r.children;if(!n)return[];if(!Array.isArray(n))throw new Error("Invalid children extension");var a=[];return n.forEach((function(t){var r=e.find((function(e){return function(t,e){return t.address===e.address&&t.chainId===e.chainId}(t,e)}));r&&a.push(r)})),a}(e,t))}))}function v(t,e,r,n,a,i,s){try{var o=t[i](s),u=o.value}catch(c){return void r(c)}o.done?e(u):Promise.resolve(u).then(n,a)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){v(i,n,a,s,o,"next",t)}function o(t){v(i,n,a,s,o,"throw",t)}s(void 0)}))}}function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}!function(t){t.YieldSourcePrizePool="YieldSourcePrizePool",t.Ticket="Ticket",t.Token="Token",t.PrizeDistributor="PrizeDistributor",t.DrawBuffer="DrawBuffer",t.DrawBeacon="DrawBeacon",t.DrawCalculator="DrawCalculator",t.DrawCalculatorTimelock="DrawCalculatorTimelock",t.PrizeDistributionBuffer="PrizeDistributionBuffer",t.PrizeTierHistory="PrizeTierHistory"}(h||(h={}));var g,x=(function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(O){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),s=new I(n||[]);return i._invoke=function(t,e,r){var n=f;return function(a,i){if(n===h)throw new Error("Generator is already running");if(n===l){if("throw"===a)throw i;return B()}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var o=z(s,r);if(o){if(o===w)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=l,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=p(t,e,r);if("normal"===u.type){if(n=r.done?l:d,u.arg===w)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=l,r.method="throw",r.arg=u.arg)}}}(t,r,s),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(O){return{type:"throw",arg:O}}}t.wrap=c;var f="suspendedStart",d="suspendedYield",h="executing",l="completed",w={};function v(){}function m(){}function b(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,x=g&&g(g(S([])));x&&x!==r&&n.call(x,i)&&(y=x);var k=b.prototype=v.prototype=Object.create(y);function P(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,s,o){var u=p(t[a],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,o)}),(function(t){r("throw",t,s,o)})):e.resolve(f).then((function(t){c.value=t,s(c)}),(function(t){return r("throw",t,s,o)}))}o(u.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}}function z(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,z(t,r),"throw"===r.method))return w;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var a=p(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,w;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,w):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function S(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:B}}function B(){return{value:e,done:!0}}return m.prototype=b,u(k,"constructor",b),u(b,"constructor",m),m.displayName=u(b,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,o,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},P(D.prototype),u(D.prototype,s,(function(){return this})),t.AsyncIterator=D,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var s=new D(c(e,r,n,a),i);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},P(k),u(k,o,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return o.type="throw",o.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;T(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:S(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),w}},t}(t.exports);try{regeneratorRuntime=e}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(g={exports:{}},g.exports),g.exports);function k(t){return P.apply(this,arguments)}function P(){return(P=m(x.mark((function t(e){var r,n,a,i;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.functions.name(),n=e.functions.symbol(),a=e.functions.decimals(),t.next=5,Promise.all([r,n,a]);case 5:return i=t.sent,t.abrupt("return",{name:i[0][0],symbol:i[1][0],decimals:i[2][0]});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t,e){return z.apply(this,arguments)}function z(){return(z=m(x.mark((function t(e,r){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.functions.balanceOf(e);case 2:return n=t.sent,t.abrupt("return",n[0]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t,e){if(!(0,o.isAddress)(e))throw new Error(t+" | Invalid address: '"+e+"'")}function T(t,e,r){return I.apply(this,arguments)}function I(){return(I=m(x.mark((function t(e,r,n){var a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getChainId();case 2:if((a=t.sent)===n){t.next=5;break}throw new Error(e+" | Signer is on network "+a+". Expected network "+n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e){if(!s.E.isSigner(e))throw new Error(t+" | signerOrProvider is not a signer")}function B(t,e,r){return O.apply(this,arguments)}function O(){return(O=m(x.mark((function t(e,r,n){var a,o,u;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.zt.isProvider(r)){t.next=8;break}return t.next=3,r.getNetwork();case 3:o=t.sent,u=o.chainId,a=u,t.next=12;break;case 8:if(!s.E.isSigner(r)){t.next=12;break}return t.next=11,r.getChainId();case 11:a=t.sent;case 12:if(a){t.next=16;break}throw new Error(e+" | Invalid value for signerOrProvider");case 16:if(a===n){t.next=18;break}throw new Error(e+" | Provider is on network "+a+". Expected network "+n);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t,e,r,n,a){var i=n.find((function(e){return e.type===r&&e.chainId===t}));if(!i)throw new Error("Invalid contract list. Missing "+r+".");return{contractMetadata:i,contract:f(a||i.address,d(i.abi),e)}}function U(t,e,r,n,a,i,s){return void 0===a&&(a={major:1,minor:0,patch:0}),void 0===i&&(i=[]),void 0===s&&(s={}),{chainId:t,address:e,version:a,type:r,abi:n,tags:i,extensions:s}}var M=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"mint",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceMinter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isMinter",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"sender",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"MinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}],E=function(){function t(t,e,r){var a=A(t.chainId,e,h.DrawCalculatorTimelock,r),i=a.contractMetadata,s=a.contract,o=new n.CH(t.address,t.abi,e);this.signerOrProvider=e,this.contractMetadataList=r,this.chainId=t.chainId,this.address=t.address,this.prizeDistributorMetadata=t,this.drawCalculatorTimelockMetadata=i,this.prizeDistributorContract=o,this.drawCalculatorTimelockContract=s,this.drawCalculatorMetadata=void 0,this.drawCalculatorContract=void 0,this.drawBufferMetadata=void 0,this.drawBufferContract=void 0,this.prizeDistributionsBufferMetadata=void 0,this.prizeDistributionsBufferContract=void 0}var e=t.prototype;return e.id=function(){return this.prizeDistributorMetadata.address+"-"+this.prizeDistributorMetadata.chainId},e.claimPrizesByDraw=function(){var t=m(x.mark((function t(e,r){var n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizeDistributors [claim] | ",t.next=3,this.getUsersAddress("PrizeDistributors [claim] | ");case 3:return n=t.sent,t.next=6,this.calculateUsersPrizes(n,e);case 6:return a=t.sent,t.abrupt("return",this.claimPrizesByDrawResults(a,r));case 8:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.claimPrizesByDrawResults=function(){var t=m(x.mark((function t(e,r){var n,a,i;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="PrizeDistributors [claimPrizes] | ",t.next=3,this.getUsersAddress(n);case 3:return a=t.sent,t.next=6,this.validateSignerNetwork(n);case 6:if(!e.totalValue.isZero()){t.next=8;break}throw new Error(n+"No prizes to claim.");case 8:if(i=(0,u.prepareClaims)({address:a},[e]),!Boolean(r)){t.next=13;break}return t.abrupt("return",this.prizeDistributorContract.claim(i.userAddress,i.drawIds,i.encodedWinningPickIndices,r));case 13:return t.abrupt("return",this.prizeDistributorContract.claim(i.userAddress,i.drawIds,i.encodedWinningPickIndices));case 14:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.claimPrizesAcrossMultipleDrawsByDrawResults=function(){var t=m(x.mark((function t(e,r){var n,a,i,s;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="PrizeDistributors [claimPrizes] | ",t.next=3,this.getUsersAddress(n);case 3:return a=t.sent,t.next=6,this.validateSignerNetwork(n);case 6:if(i=Object.values(e),!i.reduce((function(t,e){return t.add(e.totalValue)}),c.O$.from(0)).isZero()){t.next=10;break}throw new Error(n+"No prizes to claim.");case 10:if(s=(0,u.prepareClaims)({address:a},i),!Boolean(r)){t.next=15;break}return t.abrupt("return",this.prizeDistributorContract.claim(s.userAddress,s.drawIds,s.encodedWinningPickIndices,r));case 15:return t.abrupt("return",this.prizeDistributorContract.claim(s.userAddress,s.drawIds,s.encodedWinningPickIndices));case 16:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getTokenData=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTokenContract();case 2:return e=t.sent,t.abrupt("return",k(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getNewestDraw=function(){var t=m(x.mark((function t(){var e,r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDrawBufferContract();case 2:return e=t.sent,t.next=5,e.functions.getNewestDraw();case 5:return r=t.sent,n=r[0],t.abrupt("return",{drawId:n.drawId,timestamp:n.timestamp,winningRandomNumber:n.winningRandomNumber,beaconPeriodStartedAt:n.beaconPeriodStartedAt,beaconPeriodSeconds:n.beaconPeriodSeconds});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getOldestDraw=function(){var t=m(x.mark((function t(){var e,r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDrawBufferContract();case 2:return e=t.sent,t.next=5,e.functions.getOldestDraw();case 5:return r=t.sent,n=r[0],t.abrupt("return",{drawId:n.drawId,timestamp:n.timestamp,winningRandomNumber:n.winningRandomNumber,beaconPeriodStartedAt:n.beaconPeriodStartedAt,beaconPeriodSeconds:n.beaconPeriodSeconds});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getNewestPrizeDistribution=function(){var t=m(x.mark((function t(){var e,r,n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrizeDistributionsBufferContract();case 2:return e=t.sent,t.next=5,e.functions.getNewestPrizeDistribution();case 5:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{prizeDistribution:{matchCardinality:n.matchCardinality,numberOfPicks:n.numberOfPicks,tiers:n.tiers,bitRangeSize:n.bitRangeSize,prize:n.prize,drawStartTimestampOffset:n.drawStartTimestampOffset,drawEndTimestampOffset:n.drawEndTimestampOffset,maxPicksPerUser:n.maxPicksPerUser},drawId:a});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getOldestPrizeDistribution=function(){var t=m(x.mark((function t(){var e,r,n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrizeDistributionsBufferContract();case 2:return e=t.sent,t.next=5,e.functions.getOldestPrizeDistribution();case 5:return r=t.sent,n=r[0],a=r[1],t.abrupt("return",{prizeDistribution:{matchCardinality:n.matchCardinality,numberOfPicks:n.numberOfPicks,tiers:n.tiers,bitRangeSize:n.bitRangeSize,prize:n.prize,drawStartTimestampOffset:n.drawStartTimestampOffset,drawEndTimestampOffset:n.drawEndTimestampOffset,maxPicksPerUser:n.maxPicksPerUser},drawId:a});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTimelockDrawId=function(){var t=m(x.mark((function t(){var e,r,n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.drawCalculatorTimelockContract.functions.getTimelock();case 2:return e=t.sent,r=e[0],n=r[0],a=r[1],t.abrupt("return",{drawId:a,endTimeSeconds:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getDrawIdsFromDrawBuffer=function(){var t=m(x.mark((function t(){var e,r,n,a,i,s,o;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([this.getOldestDraw(),this.getNewestDraw()]);case 2:if(e=t.sent,r=e[0],"rejected"!==(n=e[1]).status&&"rejected"!==r.status){t.next=7;break}return t.abrupt("return",[]);case 7:for(a=r.value.drawId,i=n.value.drawId,s=[],o=a;o<=i;o++)s.push(o);return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getDrawIdsFromPrizeDistributionBuffer=function(){var t=m(x.mark((function t(){var e,r,n,a,i,s,o;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([this.getOldestPrizeDistribution(),this.getNewestPrizeDistribution()]);case 2:if(e=t.sent,r=e[0],"rejected"!==(n=e[1]).status&&"rejected"!==r.status){t.next=7;break}return t.abrupt("return",[]);case 7:for(a=r.value.drawId,i=n.value.drawId,s=[],o=a;o<=i;o++)s.push(o);return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getValidDrawIds=function(){var t=m(x.mark((function t(){var e,r,n,a,i,s,o,u,c,p,f,d,h,l;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([this.getOldestPrizeDistribution(),this.getNewestPrizeDistribution(),this.getOldestDraw(),this.getNewestDraw()]);case 2:if(e=t.sent,r=e[0],n=e[1],a=e[2],i=e[3],"rejected"!==r.status&&"rejected"!==n.status&&"rejected"!==i.status&&"rejected"!==a.status){t.next=9;break}return t.abrupt("return",[]);case 9:if(s=r.value.drawId,o=n.value.drawId,u=a.value.drawId,c=i.value.drawId,p=[c,o],f=Math.max(s,u),!((d=Math.min.apply(Math,p))<f)){t.next=18;break}return t.abrupt("return",[]);case 18:for(h=[],l=f;l<=d;l++)h.push(l);return t.abrupt("return",h);case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getDrawsAndPrizeDistributions=function(){var t=m(x.mark((function t(e){var r,n,a,i;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([this.getDraws(e),this.getPrizeDistributions(e)]);case 2:if(r=t.sent,n=r[0],a=r[1],"rejected"!==n.status&&"rejected"!==a.status){t.next=7;break}return t.abrupt("return",this.getDrawsAndPrizeDistributions(e.sort((function(t,e){return t-e})).slice(0,e.length-1)));case 7:return i={},Object.values(n.value).forEach((function(t,e){i[t.drawId]={draw:t,prizeDistribution:a.value[e]}})),t.abrupt("return",i);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getDraw=function(){var t=m(x.mark((function t(e){var r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDrawBufferContract();case 2:return r=t.sent,t.next=5,r.functions.getDraw(e);case 5:return n=t.sent,t.abrupt("return",{drawId:n[0].drawId,timestamp:n[0].timestamp,winningRandomNumber:n[0].winningRandomNumber,beaconPeriodStartedAt:n[0].beaconPeriodStartedAt,beaconPeriodSeconds:n[0].beaconPeriodSeconds});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getDraws=function(){var t=m(x.mark((function t(e){var r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={},e&&0!==e.length){t.next=3;break}return t.abrupt("return",r);case 3:return t.next=5,this.getDrawBufferContract();case 5:return n=t.sent,t.next=8,n.functions.getDraws(e);case 8:return t.sent[0].forEach((function(t){r[t.drawId]={drawId:t.drawId,timestamp:t.timestamp,winningRandomNumber:t.winningRandomNumber,beaconPeriodStartedAt:t.beaconPeriodStartedAt,beaconPeriodSeconds:t.beaconPeriodSeconds}})),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getPrizeDistribution=function(){var t=m(x.mark((function t(e){var r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrizeDistributionsBufferContract();case 2:return r=t.sent,t.next=5,r.functions.getPrizeDistribution(e);case 5:return n=t.sent,t.abrupt("return",{matchCardinality:n[0].matchCardinality,tiers:n[0].tiers,bitRangeSize:n[0].bitRangeSize,maxPicksPerUser:n[0].maxPicksPerUser,numberOfPicks:n[0].numberOfPicks,expiryDuration:n[0].expiryDuration,prize:n[0].prize,drawStartTimestampOffset:n[0].drawStartTimestampOffset,drawEndTimestampOffset:n[0].drawEndTimestampOffset});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getPrizeDistributions=function(){var t=m(x.mark((function t(e){var r,n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&0!==e.length){t.next=2;break}return t.abrupt("return",{});case 2:return t.next=4,this.getPrizeDistributionsBufferContract();case 4:return r=t.sent,t.next=7,r.functions.getPrizeDistributions(e);case 7:return n=t.sent,a={},n[0].forEach((function(t,r){a[e[r]]={matchCardinality:t.matchCardinality,tiers:t.tiers,bitRangeSize:t.bitRangeSize,maxPicksPerUser:t.maxPicksPerUser,numberOfPicks:t.numberOfPicks,prize:t.prize,expiryDuration:t.expiryDuration,drawStartTimestampOffset:t.drawStartTimestampOffset,drawEndTimestampOffset:t.drawEndTimestampOffset}})),t.abrupt("return",a);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUsersClaimedAmount=function(){var t=m(x.mark((function t(e,r){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizeDistributors [getUsersClaimedAmount] |",t.next=3,C("PrizeDistributors [getUsersClaimedAmount] |",e);case 3:return t.next=5,this.prizeDistributorContract.functions.getDrawPayoutBalanceOf(e,r);case 5:return n=t.sent,t.abrupt("return",n[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUsersClaimedAmounts=function(){var t=m(x.mark((function t(e,r){var n,a=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,Promise.all(r.map((function(t){return a.getUsersClaimedAmount(e,t).then((function(e){n[t]=e}))})));case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUsersNormalizedBalancesForDrawIds=function(){var t=m(x.mark((function t(e,r){var n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizeDistributors [getUsersNormalizedBalancesForDrawIds] |",t.next=3,C("PrizeDistributors [getUsersNormalizedBalancesForDrawIds] |",e);case 3:return t.next=5,this.getDrawCalculatorContract();case 5:return n=t.sent,t.next=8,n.functions.getNormalizedBalancesForDrawIds(e,r);case 8:return a=t.sent,t.abrupt("return",a[0]);case 10:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.calculateUsersPrizes=function(){var t=m(x.mark((function t(e,r){var n,a,i,s,o,c;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPrizeDistribution(r.drawId);case 2:return n=t.sent,t.next=5,this.getDrawCalculatorContract();case 5:return a=t.sent,t.next=8,a.functions.getNormalizedBalancesForDrawIds(e,[r.drawId]);case 8:if(i=t.sent,s=i[0][0],o={address:e,normalizedBalances:[s]},!s.isZero()){t.next=15;break}return t.abrupt("return",{drawId:r.drawId,totalValue:p._Y,prizes:[]});case 15:return c=(0,u.calculateDrawResults)(n,b({},r,{timestamp:r.timestamp.toNumber(),beaconPeriodStartedAt:r.beaconPeriodStartedAt.toNumber()}),o),t.abrupt("return",(0,u.filterResultsByValue)(c,n.maxPicksPerUser));case 17:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.calculateUsersPrizesByDrawId=function(){var t=m(x.mark((function t(e,r){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDraw(r);case 2:return n=t.sent,t.abrupt("return",this.calculateUsersPrizes(e,n));case 4:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getAndSetEthersContract=function(){var t=m(x.mark((function t(e,r,n){var a,i,s,o,u,c;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e+"Metadata",void 0===this[a=e+"Contract"]){t.next=4;break}return t.abrupt("return",this[a]);case 4:return t.next=6,n();case 6:return s=t.sent,o=A(this.chainId,this.signerOrProvider,r,this.contractMetadataList,s),u=o.contractMetadata,c=o.contract,this[i]=u,this[a]=c,t.abrupt("return",c);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.getDrawCalculatorContract=function(){var t=m(x.mark((function t(){var e,r=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=m(x.mark((function t(){var e,n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.prizeDistributorContract.functions.getDrawCalculator();case 2:if(e=t.sent,n=e[0],(null==(a=r.contractMetadataList.find((function(t){return t.chainId===r.chainId&&t.address===n})))?void 0:a.type)!==h.DrawCalculatorTimelock){t.next=13;break}return t.next=8,r.drawCalculatorTimelockContract.functions.getDrawCalculator();case 8:return e=t.sent,n=e[0],t.abrupt("return",n);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.abrupt("return",this.getAndSetEthersContract("drawCalculator",h.DrawCalculator,e));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getDrawBufferContract=function(){var t=m(x.mark((function t(){var e,r=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=m(x.mark((function t(){var e,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getDrawCalculatorContract();case 2:return e=t.sent,t.next=5,e.functions.getDrawBuffer();case 5:return n=t.sent,t.abrupt("return",n[0]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.abrupt("return",this.getAndSetEthersContract("drawBuffer",h.DrawBuffer,e));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getPrizeDistributionsBufferContract=function(){var t=m(x.mark((function t(){var e,r=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=m(x.mark((function t(){var e,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getDrawCalculatorContract();case 2:return e=t.sent,t.next=5,e.functions.getPrizeDistributionBuffer();case 5:return n=t.sent,t.abrupt("return",n[0]);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.abrupt("return",this.getAndSetEthersContract("prizeDistributionsBuffer",h.PrizeDistributionBuffer,e));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTokenContract=function(){var t=m(x.mark((function t(){var e,r,a,i,s=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.tokenContract){t.next=2;break}return t.abrupt("return",this.tokenContract);case 2:return e=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.prizeDistributorContract.functions.getToken();case 2:return e=t.sent,t.abrupt("return",e[0]);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=5,e();case 5:return r=t.sent,a=U(this.chainId,r,h.Token,M),i=new n.CH(a.address,a.abi,this.signerOrProvider),this.tokenMetadata=a,this.tokenContract=i,t.abrupt("return",i);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getUsersAddress=function(){var t=m(x.mark((function t(e){return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e="PrizeDistributors [getUsersAddress] |"),t.next=3,this.validateIsSigner(e);case 3:return t.next=5,this.signerOrProvider.getAddress();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.validateSignerNetwork=function(){var t=m(x.mark((function t(e){return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(e,this.signerOrProvider,this.chainId);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.validateIsSigner=function(){var t=m(x.mark((function t(e){return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(e,this.signerOrProvider);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}();var N=function(){function t(t,e,r){var a=new n.CH(t.address,t.abi,e);this.contractMetadataList=r,this.signerOrProvider=e,this.chainId=t.chainId,this.address=t.address,this.prizePoolMetadata=t,this.ticketMetadata=void 0,this.tokenMetadata=void 0,this.prizePoolContract=a,this.ticketContract=void 0,this.tokenContract=void 0}var e=t.prototype;return e.id=function(){return this.prizePoolMetadata.address+"-"+this.prizePoolMetadata.chainId},e.getUsersPrizePoolBalances=function(){var t=m(x.mark((function t(e){var r,n,a,i,s,o,u,c;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PrizePool [getUsersPrizePoolBalances] | ",t.next=3,C(r,e);case 3:return t.next=5,B(r,this.signerOrProvider,this.chainId);case 5:return t.next=7,this.getTokenContract();case 7:return n=t.sent,t.next=10,this.getTicketContract();case 10:return a=t.sent,i=D(e,n),s=D(e,a),t.next=15,Promise.all([i,s]);case 15:return o=t.sent,u=o[0],c=o[1],t.abrupt("return",{token:u,ticket:c});case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUsersTicketBalance=function(){var t=m(x.mark((function t(e){var r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PrizePool [getUsersTicketBalance] | ",t.next=3,C(r,e);case 3:return t.next=5,B(r,this.signerOrProvider,this.chainId);case 5:return t.next=7,this.getTicketContract();case 7:return n=t.sent,t.abrupt("return",D(e,n));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUsersTicketTwabAt=function(){var t=m(x.mark((function t(e,r){var n,a,i,s;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="PrizePool [getUsersTicketBalance] | ",t.next=3,C(n,e);case 3:return t.next=5,B(n,this.signerOrProvider,this.chainId);case 5:return t.next=7,this.getTicketContract();case 7:return a=t.sent,t.next=10,a.functions.getBalanceAt(e,r);case 10:return i=t.sent,s=i[0],t.abrupt("return",s);case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),e.getUsersTokenBalance=function(){var t=m(x.mark((function t(e){var r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PrizePool [getUsersTokenBalance] | ",t.next=3,C(r,e);case 3:return t.next=5,B(r,this.signerOrProvider,this.chainId);case 5:return t.next=7,this.getTokenContract();case 7:return n=t.sent,t.abrupt("return",D(e,n));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUsersDepositAllowance=function(){var t=m(x.mark((function t(e){var r,n,a,i,s;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PrizePool [getUsersDepositAllowance] | ",t.next=3,C(r,e);case 3:return t.next=5,B(r,this.signerOrProvider,this.chainId);case 5:return t.next=7,this.getTokenContract();case 7:return n=t.sent,a=this.prizePoolMetadata.address,t.next=11,n.functions.allowance(e,a);case 11:return i=t.sent,s=i[0],t.abrupt("return",{allowanceUnformatted:s,isApproved:!s.isZero()});case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getUsersTicketDelegate=function(){var t=m(x.mark((function t(e){var r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizePool [getUsersTicketDelegate] | ",t.next=3,C("PrizePool [getUsersTicketDelegate] | ",e);case 3:return t.next=5,this.getTicketContract();case 5:return r=t.sent,t.next=8,r.functions.delegateOf(e);case 8:return n=t.sent,t.abrupt("return",n[0]);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getTokenData=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizePool [getTokenData] | ",t.next=3,B("PrizePool [getTokenData] | ",this.signerOrProvider,this.chainId);case 3:return t.next=5,this.getTokenContract();case 5:return e=t.sent,t.abrupt("return",k(e));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTicketData=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizePool [getTicketData] | ",t.next=3,B("PrizePool [getTicketData] | ",this.signerOrProvider,this.chainId);case 3:return t.next=5,this.getTicketContract();case 5:return e=t.sent,t.abrupt("return",k(e));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTicketTotalSupply=function(){var t=m(x.mark((function t(){var e,r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"PrizePool [getTicketData] | ",t.next=3,B("PrizePool [getTicketData] | ",this.signerOrProvider,this.chainId);case 3:return t.next=5,this.getTicketContract();case 5:return e=t.sent,t.next=8,e.functions.totalSupply();case 8:return r=t.sent,n=r[0],t.abrupt("return",n);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTicketContract=function(){var t=m(x.mark((function t(){var e,r,n,a,i,s=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.ticketContract){t.next=2;break}return t.abrupt("return",this.ticketContract);case 2:return e=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.prizePoolContract.functions.getTicket();case 2:return e=t.sent,t.abrupt("return",e[0]);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=5,e();case 5:return r=t.sent,n=A(this.chainId,this.signerOrProvider,h.Ticket,this.contractMetadataList,r),a=n.contractMetadata,i=n.contract,this.ticketMetadata=a,this.ticketContract=i,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getTokenContract=function(){var t=m(x.mark((function t(){var e,r,a,i,s=this;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.tokenContract){t.next=2;break}return t.abrupt("return",this.tokenContract);case 2:return e=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.prizePoolContract.functions.getToken();case 2:return e=t.sent,t.abrupt("return",e[0]);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=5,e();case 5:return r=t.sent,a=U(this.chainId,r,h.Token,M),i=new n.CH(a.address,a.abi,this.signerOrProvider),this.tokenMetadata=a,this.tokenContract=i,t.abrupt("return",i);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t}();var L=function(){function t(t,e){var r,a;this.providers=t,this.contractList=e,this.prizePools=function(t,e){var r=w(t.contracts,h.YieldSourcePrizePool),n=[];return r.forEach((function(r){var a=r.find((function(t){return t.type===h.YieldSourcePrizePool})),i=e[a.chainId];try{n.push(new N(a,i,t.contracts))}catch(o){var s=o;console.error(s.message)}})),n}(e,t),this.prizeDistributors=(a=t,(r=e).contracts.filter((function(t){return t.type===h.PrizeDistributor})).map((function(t){return new E(t,a[t.chainId],r.contracts)})));var i=e.contracts.find((function(t){return t.type===h.DrawBeacon})),s=i.chainId,o=t[s],u=new n.CH(i.address,i.abi,o),c=e.contracts.find((function(t){return t.type===h.DrawBuffer&&t.chainId===s})),p=new n.CH(c.address,c.abi,o),f=e.contracts.find((function(t){return t.type===h.PrizeTierHistory&&t.chainId===s})),d=new n.CH(f.address,f.abi,o);this.beaconChainId=s,this.beaconAddress=i.address,this.drawBeaconMetadata=i,this.drawBeaconContract=u,this.drawBufferMetadata=c,this.drawBufferContract=p,this.prizeTierHistoryMetadata=f,this.prizeTierHistoryContract=d}var e=t.prototype;return e.id=function(){return"prize-pool-network-"+this.beaconChainId+"-"+this.beaconAddress},e.getUsersPrizePoolBalances=function(){var t=m(x.mark((function t(e){var r;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.prizePools.map(function(){var t=m(x.mark((function t(r){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getUsersPrizePoolBalances(e);case 2:return n=t.sent,t.abrupt("return",{chainId:r.chainId,address:r.address,balances:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",Promise.all(r));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.getDrawBeaconPeriod=function(){var t=m(x.mark((function t(){var e,r,n,a,i,s,o,u;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.drawBeaconContract.functions.getBeaconPeriodSeconds(),this.drawBeaconContract.functions.getBeaconPeriodStartedAt(),this.drawBeaconContract.functions.getNextDrawId()]);case 2:return e=t.sent,r=e[0],n=e[1],a=e[2],i=n[0],s=r[0],o=i.add(s),u=a[0],t.abrupt("return",{startedAtSeconds:i,periodSeconds:s,endsAtSeconds:o,drawId:u});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getBeaconChainDrawIds=function(){var t=m(x.mark((function t(){var e,r,n,a,i,s,o;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled([this.drawBufferContract.functions.getOldestDraw(),this.drawBufferContract.functions.getNewestDraw()]);case 2:if(e=t.sent,r=e[0],"rejected"!==(n=e[1]).status&&"rejected"!==r.status){t.next=7;break}return t.abrupt("return",[]);case 7:for(a=r.value[0].drawId,i=n.value[0].drawId,s=[],o=a;o<=i;o++)s.push(o);return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getBeaconChainDraws=function(){var t=m(x.mark((function t(){var e,r;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBeaconChainDrawIds();case 2:return e=t.sent,r={},t.next=6,this.drawBufferContract.functions.getDraws(e);case 6:return t.sent[0].forEach((function(t){r[t.drawId]={drawId:t.drawId,timestamp:t.timestamp,winningRandomNumber:t.winningRandomNumber,beaconPeriodStartedAt:t.beaconPeriodStartedAt,beaconPeriodSeconds:t.beaconPeriodSeconds}})),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getUpcomingPrizeTier=function(){var t=m(x.mark((function t(){var e,r,n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.prizeTierHistoryContract.functions.getNewestDrawId();case 2:return e=t.sent,r=e[0],t.next=6,this.prizeTierHistoryContract.functions.getPrizeTier(r);case 6:return n=t.sent,t.abrupt("return",{bitRangeSize:n[0].bitRangeSize,expiryDuration:n[0].expiryDuration,maxPicksPerUser:n[0].maxPicksPerUser,prize:n[0].prize,tiers:n[0].tiers});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getPrizePool=function(t,e){return this.prizePools.find((function(r){return r.chainId===t&&r.address===e}))},e.getPrizeDistributor=function(t,e){return this.prizeDistributors.find((function(r){return r.chainId===t&&r.address===e}))},t}(),j=function(t){var e,r;function n(e,r,n){var a;return(a=t.call(this,e,r,n.contractMetadataList)||this).signer=r,a}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,y(e,r);var a=n.prototype;return a.withdraw=function(){var t=m(x.mark((function t(e,r){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"User [withdraw]",t.next=3,this.validateSignerNetwork("User [withdraw]");case 3:return t.next=5,this.signer.getAddress();case 5:if(n=t.sent,!Boolean(r)){t.next=10;break}return t.abrupt("return",this.prizePoolContract.withdrawFrom(n,e,r));case 10:return t.abrupt("return",this.prizePoolContract.withdrawFrom(n,e));case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),a.deposit=function(){var t=m(x.mark((function t(e,r){var n;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"User [depositTo]",t.next=3,this.validateSignerNetwork("User [depositTo]");case 3:return t.next=5,this.signer.getAddress();case 5:if(n=t.sent,!Boolean(r)){t.next=10;break}return t.abrupt("return",this.prizePoolContract.depositTo(n,e,r));case 10:return t.abrupt("return",this.prizePoolContract.depositTo(n,e));case 11:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),a.depositAndDelegate=function(){var t=m(x.mark((function t(e,r,n){var a,i;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="User [depositToAndDelegate]",t.next=3,this.validateSignerNetwork(a);case 3:if(!r){t.next=6;break}return t.next=6,C(a,r);case 6:return t.next=8,this.signer.getAddress();case 8:if(i=t.sent,!Boolean(n)){t.next=13;break}return t.abrupt("return",this.prizePoolContract.depositToAndDelegate(i,e,r||i,n));case 13:return t.abrupt("return",this.prizePoolContract.depositToAndDelegate(i,e,r||i));case 14:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),a.approveDeposits=function(){var t=m(x.mark((function t(e,r){var n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"User [approveDeposits]",t.next=3,this.validateSignerNetwork("User [approveDeposits]");case 3:return n=this.prizePoolMetadata.address,t.next=6,this.getTokenContract();case 6:if(a=t.sent,!Boolean(r)){t.next=11;break}return t.abrupt("return",a.approve(n,e||p.Bz,r));case 11:return t.abrupt("return",a.approve(n,e||p.Bz));case 12:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),a.selfDelegateTickets=function(){var t=m(x.mark((function t(e){var r;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"User [selfDelegateTickets]",t.next=3,this.validateSignerNetwork("User [selfDelegateTickets]");case 3:return t.next=5,this.signer.getAddress();case 5:if(r=t.sent,!Boolean(e)){t.next=10;break}return t.abrupt("return",this.delegateTickets(r,e));case 10:return t.abrupt("return",this.delegateTickets(r));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.delegateTickets=function(){var t=m(x.mark((function t(e,r){var n,a;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="User [delegateTickets]",t.next=3,this.validateSignerNetwork(n);case 3:return t.next=5,C(n,e);case 5:return t.next=7,this.getTicketContract();case 7:if(a=t.sent,!Boolean(r)){t.next=12;break}return t.abrupt("return",a.delegate(e,r));case 12:return t.abrupt("return",a.delegate(e));case 13:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),a.getTicketBalance=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signer.getAddress();case 2:return e=t.sent,t.abrupt("return",this.getUsersTicketBalance(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.getTokenBalance=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signer.getAddress();case 2:return e=t.sent,t.abrupt("return",this.getUsersTokenBalance(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.getDepositAllowance=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signer.getAddress();case 2:return e=t.sent,t.abrupt("return",this.getUsersDepositAllowance(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.getTicketDelegate=function(){var t=m(x.mark((function t(){var e;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signer.getAddress();case 2:return e=t.sent,t.abrupt("return",this.getUsersTicketDelegate(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.validateSignerNetwork=function(){var t=m(x.mark((function t(e){return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(e,this.signer,this.chainId);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n}(N)}}]);