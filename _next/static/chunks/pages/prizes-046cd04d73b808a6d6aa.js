(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3787],{48452:function(e,t,r){"use strict";r.d(t,{q:function(){return u}});var n=r(26265),s=r(85893),a=r(38347),i=r(66973),o=r.n(i);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e){var t=e.className,r=(0,a.Z)(e,["className"]);return(0,s.jsx)("div",{className:t,children:(0,s.jsx)("img",l({},r))})};u.defaultProps={src:o(),alt:"Trophy icon",width:"88",height:"64"}},60314:function(e,t,r){"use strict";r.d(t,{v:function(){return l}});var n=r(85893),s=r(62489),a=r(26793),i=r(94184),o=r.n(i),c=(r(67294),r(54012)),l=function(e){var t=e.chainId,r=e.tx,i=e.className,l=e.closeModal,u=e.hideCloseButton,d=(0,a.$)().t;return(0,n.jsxs)("div",{className:o()("flex flex-col",i),children:[(0,n.jsx)(c.i,{className:"w-full",chainId:t,tx:r}),!u&&(0,n.jsx)(s.LE,{onClick:function(){return l()},theme:s.kY.purpleOutline,size:s.rZ.sm,className:"w-full mt-4",children:d("close","Close")})]})};l.defaultProps={hideCloseButton:!1}},49321:function(e,t,r){"use strict";r.d(t,{A:function(){return p}});var n=r(26265),s=r(85893),a=(r(67294),r(94184)),i=r.n(a),o=r(41725),c=r(26793),l=r(15851);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.prizeTier,r=e.className,n=e.ticket,a=e.isFetched,o=t.tiers,l=(0,c.$)().t;return(0,s.jsxs)("div",{className:i()("flex flex-col max-w-md text-center",r),children:[(0,s.jsxs)("div",{className:"flex justify-between space-x-2 sm:space-x-4",children:[(0,s.jsx)(m,{children:l("amount")}),(0,s.jsx)(m,{children:l("projectedPrizes","Prizes (Projected)")})]}),(0,s.jsx)("div",{className:"flex flex-col space-y-2",children:a?(0,s.jsx)(s.Fragment,{children:o.map((function(e,r){return(0,s.jsx)(x,{index:r,prizeTier:t,ticket:n},"distribution_row_".concat(r))}))}):Array.from(Array(3)).map((function(e,t){return(0,s.jsx)(f,{},"loading-row-".concat(t))}))})]})};p.defaultProps={isFetched:!0};var f=function(){return(0,s.jsx)("div",{className:"h-8 rounded-lg w-full bg-body animate-pulse"})},m=function(e){return(0,s.jsx)("div",d(d({},e),{},{className:i()("font-inter text-xxs uppercase font-semibold text-inverse mt-8 mb-2 opacity-60 w-full",e.className)}))},x=function(e){var t=e.index,r=e.prizeTier,n=e.ticket,a=(0,o.KW)(t,r),i=(0,o.JG)(r.bitRangeSize,t);if(a.isZero())return null;var c=(0,l.C)(a,n.decimals).amountPretty;return(0,s.jsxs)("div",{className:"flex flex-row justify-between space-x-2 sm:space-x-4",children:[(0,s.jsxs)(b,{index:t,children:["$",c]}),(0,s.jsx)(b,{index:t,children:i})]})},b=function(e){return(0,s.jsx)("div",d(d({},e),{},{className:i()(e.className,"font-inter text-sm xs:text-lg capitalize my-1 w-full",{"text-flashy font-bold":0===e.index,"opacity-70 text-inverse font-semibold":0!==e.index})}))}},36108:function(e,t,r){"use strict";r.d(t,{d:function(){return m}});var n=r(85893),s=r(67294),a=r(95062),i=r(62489),o=r(37646),c=r(66479),l=r(8396),u=r(72054),d=r(94184),p=r.n(d),f=r(26793),m=function(e){var t=e.className,r=(0,f.$)().t,d=(0,s.useState)(!1),m=d[0],b=d[1],h=(0,u.f)(),v=(0,c.SU)(),j=v.chainId,w=v.setSelectedChainId;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:function(){return b(!0)},className:p()(t,"bg-tertiary rounded-lg py-2 px-3 flex items-center","border border-transparent hover:border-highlight-1"),children:[(0,n.jsx)(i.dF,{chainId:j,className:"mx-1",sizeClassName:"w-5 h-5"}),(0,n.jsx)("span",{className:"capitalize leading-none tracking-wider font-bold",children:(0,o.getNetworkNiceNameByChainId)(j)}),(0,n.jsx)(a.Z,{icon:"chevron-down",className:"ml-2"})]}),(0,n.jsxs)(l.R,{open:m,onDismiss:function(){return b(!1)},maxWidthClassName:"max-w-md",children:[(0,n.jsx)("h6",{className:"text-center uppercase text-sm mb-3",children:r("chooseANetwork")}),(0,n.jsx)("p",{className:"max-w-xs mx-auto text-xs mb-12 text-center",children:r("v4NetworkSelectPrompt")}),(0,n.jsx)("ul",{className:"space-y-2 mx-auto max-w-sm",children:h.map((function(e){return(0,n.jsx)(x,{chainId:e,isSelected:e===j,onDismiss:function(){return b(!1)},setSelectedChainId:w},e)}))})]})]})},x=function(e){var t=e.chainId,r=e.isSelected,s=e.setSelectedChainId,a=e.onDismiss;return(0,n.jsx)("li",{children:(0,n.jsxs)("button",{onClick:function(){s(t),a()},className:p()("bg-pt-purple-lighter dark:bg-pt-purple-darker rounded-lg p-4 flex items-center w-full transition-colors","border  hover:border-highlight-1",{"border-default":r,"border-transparent":!r}),children:[(0,n.jsx)(i.dF,{chainId:t,className:"mx-1",sizeClassName:"w-5 h-5 mr-2"}),(0,n.jsx)("span",{className:"capitalize leading-none tracking-wider font-bold text-lg",children:(0,o.getNetworkNiceNameByChainId)(t)})]})})}},9414:function(e,t,r){"use strict";r.d(t,{q:function(){return o}});var n=r(26265),s=r(85893),a=r(62489);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o=function(e){return(0,s.jsx)(a.qp,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e))};o.defaultProps={hideDays:!0,getTimeColorClassName:function(e){return e>=3600?"text-highlight-6":e>=3600?"text-orange":"text-functional-red"}}},53738:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var n=r(85893),s=(r(67294),r(94184)),a=r.n(s),i=r(62489),o=function(e){var t=e.className,r=e.chainId,s=e.sizeClassName,o=e.token;return o?(0,n.jsxs)("div",{className:a()("flex items-center",t),children:[(0,n.jsx)(i.T1,{sizeClassName:s,className:"mr-2",chainId:r,address:o.address}),(0,n.jsx)("span",{className:"",children:o.symbol})]}):null}},68370:function(e,t,r){"use strict";r.d(t,{k:function(){return f}});var n=r(85893),s=r(26265),a=(r(62489),r(67294)),i=r(26793),o=r(8396),c=r(48452),l=r(49321),u=function(e){var t=(0,i.$)().t;return(0,n.jsxs)(o.R,{className:"flex flex-col",open:e.isOpen,onDismiss:e.closeModal,label:"Prize breakdown modal",children:[(0,n.jsx)(c.q,{className:"mx-auto"}),(0,n.jsx)("div",{className:"font-inter font-semibold text-sm capitalize text-inverse my-3 text-center",children:t("prizeBreakdown","Prize breakdown")}),(0,n.jsx)("hr",{className:"opacity-10 border-pt-purple dark:border-white w-80"}),(0,n.jsx)(l.A,{className:"mx-auto w-full",prizeTier:e.prizeTier,ticket:e.ticket})]})};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){var t=e.children,r=e.prizeTier,s=e.label,o=e.Button,c=(0,a.useState)(!1),l=c[0],d=c[1],f=(0,i.$)().t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{className:e.className,onClick:function(){return d(!0)},disabled:!r,children:t||s||f("viewPrizeTiers","View prize tiers")}),(0,n.jsx)(u,p(p({},e),{},{prizeTier:r,isOpen:l,closeModal:function(){return d(!1)}}))]})};f.defaultProps={className:"uppercase font-bold text-xxs sm:text-xs text-highlight-9 hover:text-inverse transition leading-none tracking-wide"}},45320:function(e,t,r){"use strict";r.d(t,{l:function(){return l}});var n=r(26265),s=r(37646),a=r(49953),i=r(67294);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(0,i.useState)(e),r=t[0],n=t[1],o=(0,i.useState)(u(r)),l=o[0],d=o[1],p=(0,i.useState)((0,s.getTimeBreakdown)(l)),f=p[0],m=p[1];return(0,i.useEffect)((function(){if(e!==r){n(e);var t=u(e);d(t),m((0,s.getTimeBreakdown)(t))}}),[e]),(0,a.useInterval)((function(){var e=l-1;e>=0&&(d(e),m((0,s.getTimeBreakdown)(e)))}),1e3),c(c({},f),{},{secondsLeft:l})},u=function(e){var t=Math.round((0,s.msToS)(Date.now()));return e>t?e-t:0}},60245:function(e,t,r){"use strict";r.d(t,{W9:function(){return u},w7:function(){return d},GO:function(){return p}});var n=r(26265),s=r(809),a=r.n(s),i=r(92447),o=r(42382),c=r(88767);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var u="usePrizeDistributorToken",d=function(e){return(0,c.useQuery)([u,null===e||void 0===e?void 0:e.id()],(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p(e));case 1:case"end":return t.stop()}}),t)}))),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o.u))},p=function(){var e=(0,i.Z)(a().mark((function e(t){var r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenData();case 2:return r=e.sent,e.next=5,t.getTokenContract();case 5:return n=e.sent,s={address:n.address,symbol:r.symbol,name:r.name,decimals:r.decimals},e.abrupt("return",{prizeDistributorId:t.id(),token:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},86551:function(e,t,r){"use strict";r.d(t,{k:function(){return s}});var n=r(84299),s=function(){var e=(0,n.R)();return null===e||void 0===e?void 0:e.prizeDistributors}},45571:function(e,t,r){"use strict";r.d(t,{bq:function(){return m},R:function(){return x},fY:function(){return b}});var n=r(809),s=r.n(n),a=r(92447),i=r(26265),o=r(88767),c=r(42382),l=r(15851),u=r(34985),d=r(60245);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m="useUsersClaimedAmounts",x=function(e,t){var r=(0,u.K6)(t),n=r.data,s=r.isFetched,a=(0,d.w7)(t),i=a.data,l=a.isFetched,p=Boolean(t)&&Boolean(e)&&s&&l,x=null===n||void 0===n?void 0:n.drawIds,h=null===i||void 0===i?void 0:i.token;return(0,o.useQuery)([m,null===t||void 0===t?void 0:t.id(),e],(function(){return b(e,t,x,h)}),f(f({},c.u),{},{enabled:p}))},b=function(){var e=(0,a.Z)(s().mark((function e(t,r,n,a){var i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getUsersClaimedAmounts(t,n);case 2:return i=e.sent,o={},n.map((function(e){o[e]=(0,l.C)(i[e],a.decimals)})),e.abrupt("return",{token:a,prizeDistributorId:r.id(),usersAddress:t,claimedAmounts:o});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,s){return e.apply(this,arguments)}}()},34985:function(e,t,r){"use strict";r.d(t,{$y:function(){return p},K6:function(){return f},rU:function(){return m}});var n=r(26265),s=r(809),a=r.n(s),i=r(92447),o=r(88767),c=r(42382),l=r(78122);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p="useValidDrawIds",f=function(e){var t=(0,l.H)(),r=t.data,n=t.isFetched&&Boolean(e);return(0,o.useQuery)([p,null===e||void 0===e?void 0:e.id(),null===r||void 0===r?void 0:r.drawId],(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",m(e));case 1:case"end":return t.stop()}}),t)}))),d(d({},c.u),{},{enabled:n}))},m=function(){var e=(0,i.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getValidDrawIds();case 2:return r=e.sent,e.abrupt("return",{prizeDistributorId:t.id(),drawIds:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},94093:function(e,t,r){"use strict";r.d(t,{Kb:function(){return f},Ij:function(){return m},$8:function(){return x}});var n=r(26265),s=r(809),a=r.n(s),i=r(92447),o=r(88767),c=r(42382),l=r(78122),u=r(34985);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f="useValidDraws",m=function(e){var t=(0,l.H)(),r=t.data,n=t.isFetched,s=(0,u.K6)(e),d=s.data,m=s.isFetched,b=n&&m&&Boolean(e),h=null===d||void 0===d?void 0:d.drawIds;return(0,o.useQuery)([f,null===e||void 0===e?void 0:e.id(),null===r||void 0===r?void 0:r.startedAtSeconds.toString()],(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x(e,h));case 1:case"end":return t.stop()}}),t)}))),p(p({},c.u),{},{enabled:b}))},x=function(){var e=(0,i.Z)(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDraws(r);case 2:return n=e.sent,e.abrupt("return",{prizeDistributorId:t.id(),draws:n});case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},41559:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Mt}});var n=r(85893),s=r(67294),a=r(97285),i=r(86140),o=r(68776),c=r(57989),l=r(26265),u=r(94184),d=r.n(u),p=r(95062),f=r(62489),m=r(26793),x=r(7794),b=r(809),h=r.n(b),v=r(92447),j=r(88767),w=r(94093),y=function(e){var t=(0,w.Ij)(e),r=t.data,n=t.isFetched&&Boolean(e);return(0,j.useQuery)(["useAllPartialDrawDatas",null===e||void 0===e?void 0:e.id(),null!==r&&void 0!==r&&r.draws?Object.keys(r.draws):[]],(function(){return O(e,r.draws)}),{enabled:n})},O=function(){var e=(0,v.Z)(h().mark((function e(t,r){var n,s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDrawIdsFromPrizeDistributionBuffer();case 2:return n=e.sent,e.next=5,t.getPrizeDistributions(n);case 5:return s=e.sent,a={},n.forEach((function(e){var t=s[e],n=r[e];a[n.drawId]={draw:n,prizeDistribution:t}})),Object.keys(r).map(Number).forEach((function(e){if(!n.includes(e)&&(0===n.length||e>n[0])){var t=r[e];a[e]={draw:t}}})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=r(45571),N=r(37646),P=r(78122),k=r(86551),D=r(42382);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(){var e=(0,k.k)(),t=(0,P.H)(),r=t.data,n=t.isFetched,s=Boolean(e)&&n;return(0,j.useQuery)(["useDrawUnlockTime",null===r||void 0===r?void 0:r.startedAtSeconds.toString(),null===e||void 0===e?void 0:e.map((function(e){return e.id()}))],(function(){return C(e)}),I(I({},D.u),{},{refetchInterval:(0,N.sToMs)(300),enabled:s}))},C=function(){var e=(0,v.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return e.getTimelockDrawId()})));case 2:return r=e.sent,n={},r.forEach((function(e){var t=n[e.drawId];t?t.endTimeSeconds.lt(e.endTimeSeconds)&&(n[e.drawId]={endTimeSeconds:e.endTimeSeconds.add(1)}):n[e.drawId]={endTimeSeconds:e.endTimeSeconds.add(1)}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=r(45320),Z=function(e){var t=e.className,r=(e.years,e.weeks),s=e.days,a=e.hours,i=e.minutes,o=e.seconds,c=(e.hideYears,e.hideWeeks),l=e.hideDays,u=e.hideHours,p=e.hideMinutes,f=e.hideSeconds,x=(0,m.$)().t;return(0,n.jsxs)("span",{className:d()("space-x-1",t),children:[Boolean(r)&&!c&&"".concat(r," ").concat(x("lowercaseWeek",{count:r})),Boolean(s)&&!l&&"".concat(s," ").concat(x("lowercaseDay",{count:s})),Boolean(a)&&!u&&(0,n.jsxs)("span",{className:"ml-1",children:[a," ",x("lowercaseHour",{count:a})]}),Boolean(i)&&!p&&(0,n.jsxs)("span",{className:"ml-1",children:[i," ",x("lowercaseMinute",{count:i})]}),Boolean(o)&&!f&&"".concat(o," ").concat(x("lowercaseSecond",{count:o}))]})};Z.defaultProps={};var T=r(15851),F=function(e){var t=e.amount,r=e.className,s=e.numberClassName,a=e.textClassName,i=(0,m.$)().t;if(!t)return null;var o=t.amountPretty;return(0,n.jsxs)("div",{className:r,children:[(0,n.jsxs)("span",{className:s,children:["$",o]}),(0,n.jsx)("span",{className:a,children:i("inPrizes","in prizes")})]})};F.defaultProps={numberClassName:"font-bold text-inverse text-xs xs:text-sm",textClassName:"font-bold text-inverse text-xxs xs:text-xs ml-1 opacity-60"};var A=r(68370),R=r(59182),B=r(34985);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(e,t){var r=(0,B.K6)(t),n=r.data,s=r.isFetched,a=Boolean(t)&&Boolean(e)&&s,i=null===n||void 0===n?void 0:n.drawIds;return(0,j.useQuery)(["useUsersNormalizedBalances",null===t||void 0===t?void 0:t.id(),e],(function(){return $(e,t,i)}),M(M({},D.u),{},{enabled:a}))},$=function(){var e=(0,v.Z)(h().mark((function e(t,r,n){var s,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getUsersNormalizedBalancesForDrawIds(t,n);case 2:return s=e.sent,a={},n.map((function(e,t){a[e]=s[t]})),e.abrupt("return",(0,l.Z)({},t,a));case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),L=r(64121),U=r(91131);r(34155);Symbol();const V=()=>{const e=new WeakMap;return(t,r)=>{const n=((e,t)=>{for(;;){const[r,...n]=t,s=e.get(r);if(!s)return;if(!n.length)return s[1];e=s[0],t=n}})(e,r);if(n)return n;const s=t();return((e,t,r)=>{for(;;){const[n,...s]=t;let a=e.get(n);if(a||(a=[new WeakMap],e.set(n,a)),!s.length)return void(a[1]=r);e=a[0],t=s}})(e,r,s),s}};V();V();V();Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;V();const Y=(H=()=>localStorage,{getItem:e=>{const t=H().getItem(e);return t instanceof Promise?t.then((e=>JSON.parse(e||""))):JSON.parse(t||"")},setItem:(e,t)=>{H().setItem(e,JSON.stringify(t))}});var H;function Q(e,t,r=Y){const n=()=>{try{const n=r.getItem(e);return n instanceof Promise?n.catch((()=>t)):n}catch{return t}},s=(0,U.atom)(r.delayInit?t:n());s.onMount=t=>{let s;if(r.subscribe&&(s=r.subscribe(e,t)),r.delayInit){const e=n();e instanceof Promise?e.then(t):t(e)}return s};return(0,U.atom)((e=>e(s)),((t,n,a)=>{const i="function"===typeof a?a(t(s)):a;return n(s,i),r.setItem(e,i)}))}new WeakMap;V();function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=Q("draw_ids_to_not_claim",new Set,{getItem:function(e){var t=localStorage.getItem(e);return t?new Set(t.split(",").map(Number)):new Set},setItem:function(e,t){localStorage.setItem(e,Array.from(t).join(","))}}),G="stored_draw_results",X=Q(G,{},{getItem:function(e){var t=localStorage.getItem(e);return t?(0,N.deserializeBigNumbers)(JSON.parse(t)):{}},setItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))}}),ee=function(e,t){var r;return(null===(r=te()[e])||void 0===r?void 0:r[t.id()])||{}},te=function(){return(0,N.deserializeBigNumbers)(JSON.parse(localStorage.getItem(G)))||{}},re=function(e,t,r,n){var s=te(),a=s[e];a||(a={},s[e]=a);var i=a[t.id()];a[t.id()]=i?J(J({},i),r):r,n(s)},ne=function(e,t){var r,n=(0,U.useAtom)(X),s=(null===(r=(0,L.Z)(n,1)[0][e])||void 0===r?void 0:r[t.id()])||{};return(0,l.Z)({},e,s)};function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=function(e){var t=e.prizePool,r=e.prizeDistributor,s=e.className,a=(0,m.$)().t,i=(0,c.b)(),o=(0,x.LA)(t),l=o.data,u=o.isFetched,p=y(r),b=p.data,h=p.isFetched,v=(0,g.R)(i,r).data,j=W(i,r).data,w=S(),O=w.data,N=w.isFetched;if(!u||!h||!N)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{className:d()(s,"mb-1")}),(0,n.jsxs)("ul",{className:"space-y-4",children:[(0,n.jsx)(fe,{}),(0,n.jsx)(fe,{}),(0,n.jsx)(fe,{})]})]});var P=Object.values(b).reverse();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{className:d()(s,"mb-1")}),0===P.length&&(0,n.jsx)(f.Zb,{children:(0,n.jsx)("div",{className:"opacity-70 text-center w-full",children:a("noDrawsYet","No draws yet, check back soon")})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none bg-body-list-fade",style:{zIndex:1}}),(0,n.jsx)("ul",{className:"space-y-4 max-h-96 overflow-y-auto pb-10",children:P.map((function(e){var t=e.draw.drawId;return(0,n.jsx)(oe,{drawData:e,prizeDistributor:r,token:l.token,ticket:l.ticket,claimedAmount:null===v||void 0===v?void 0:v.claimedAmounts[t],normalizedBalance:null===j||void 0===j?void 0:j[i][t],drawLock:O[t]},"past-prize-list-".concat(t,"-").concat(r.id()))}))})]})]})},oe=function(e){var t=e.ticket,r=e.drawData,s=r.draw,a=r.prizeDistribution,i=a?(0,T.C)(a.prize,t.decimals):null;return(0,n.jsx)("li",{children:(0,n.jsx)(A.k,{ticket:t,prizeTier:a,Button:function(t){var r=t.onClick;return(0,n.jsxs)("button",{onClick:r,className:d()("flex flex-row justify-between w-full bg-white dark:bg-pt-purple-dark dark:bg-opacity-50 rounded-lg p-4","hover:shadow-lg hover:bg-opacity-100"),children:[(0,n.jsxs)("div",{className:"flex flex-col xs:flex-row justify-between w-full",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:w-2/3",children:[(0,n.jsxs)("span",{className:"flex items-start",children:[(0,n.jsx)(le,{className:"uppercase font-bold text-accent-2 opacity-50 text-xs xs:text-sm mr-2",draw:s}),(0,n.jsx)(ce,{className:"uppercase font-bold text-accent-1 opacity-80 text-xs xs:text-sm",draw:s})]}),(0,n.jsx)(de,ae(ae({},e),{},{className:"mt-2 text-left"})),(0,n.jsx)(ue,{pendingClassName:"font-bold text-inverse text-xs xs:text-sm opacity-90",prizeDistribution:a})]}),(0,n.jsx)(F,{amount:i,className:"hidden xs:flex",numberClassName:"font-bold text-inverse text-xs xs:text-sm",textClassName:"font-bold text-inverse text-xs xs:text-sm ml-1 opacity-60"})]}),(0,n.jsx)(p.Z,{icon:"chevron-right",className:"text-pt-purple-lighter w-6 h-6 ml-2 mb-auto"})]})}})})},ce=function(e){return(0,n.jsx)("span",{className:e.className,children:(0,R.y)(e.draw.beaconPeriodStartedAt.toNumber()+e.draw.beaconPeriodSeconds)})};ce.defaultProps={className:"uppercase font-bold text-inverse opacity-70 text-xs leading-none"};var le=function(e){return(0,n.jsxs)("span",{className:e.className,children:["#",e.draw.drawId]})};le.defaultProps={className:"uppercase font-bold text-inverse mr-2 opacity-50 text-xs leading-none"};var ue=function(e){var t=(0,m.$)().t;return e.prizeDistribution?null:(0,n.jsx)("div",{className:e.pendingClassName,children:(0,n.jsxs)(f.u,{id:"tooltip-what-is-propagating",tip:t("propagatingMeans","There is a 24 hour cooldown while the prize is being distributed to all networks. You can check if you won this prize 24 hours after the draw."),className:"flex items-center",children:[(0,n.jsx)(f.kW,{size:10,className:"mr-2"})," ",(0,n.jsxs)("span",{className:"uppercase flex items-center",children:[" ",(0,n.jsxs)("span",{className:"border-default border-dotted border-b-2",children:[" ",t("propagating","Propagating ...")," "]}),(0,n.jsx)(p.Z,{icon:"help-circle",className:"relative w-4 h-4 text-inverse ml-2"})]})]})})},de=function(e){var t=e.claimedAmount,r=e.prizeDistributor,s=e.className,a=e.ticket,i=e.drawLock,o=e.drawData,l=e.normalizedBalance,u=o.draw,f=(0,c.b)(),x=ne(f,r),b=(0,m.$)().t,h=(0,E.l)(null===i||void 0===i?void 0:i.endTimeSeconds.toNumber()),v=null===x||void 0===x?void 0:x[f],j=null===v||void 0===v?void 0:v[u.drawId],w=null===t||void 0===t?void 0:t.amountUnformatted,y=w&&!(null!==w&&void 0!==w&&w.isZero()),O=j&&!j.totalValue.isZero(),g=l&&l.isZero();if(null!==h&&void 0!==h&&h.secondsLeft){var N=h.weeks,P=h.days,k=h.hours,D=h.minutes,z=N>0,I=z||P>0,S=I||k>0||D>0;return(0,n.jsxs)("div",{className:d()("text-inverse flex leading-tight",s),children:[(0,n.jsx)(p.Z,{icon:"lock",className:"w-4 h-4 my-auto mr-2"}),(0,n.jsxs)("span",{children:[b("drawNumber","Draw #{{number}}",{number:u.drawId})," ",b("unlocksIn","unlocks in"),(0,n.jsx)(Z,ae(ae({className:"ml-1"},h),{},{hideHours:z,hideMinutes:I,hideSeconds:S}))]})]})}if(f&&!y&&!O&&j)return(0,n.jsx)("span",{className:d()("text-inverse",s),children:b("noPrizesWon","No prizes won")});if(f&&!y&&O)return(0,n.jsx)("div",{className:d()(s,"animate-pulse"),children:(0,n.jsx)("span",{className:"text-accent-1",children:b("unclaimed","Unclaimed")})});if(f&&t&&!t.amountUnformatted.isZero()){var C=t.amountPretty;return(0,n.jsxs)("div",{className:d()(s),children:[(0,n.jsx)("span",{className:"text-accent-1",children:b("claimed","Claimed")}),(0,n.jsx)("span",{className:"ml-2 font-bold",children:C}),(0,n.jsx)("span",{className:"ml-2 font-bold",children:a.symbol})]})}return f&&l&&g?(0,n.jsx)("div",{className:d()(s),children:(0,n.jsx)("span",{className:"text-accent-1 opacity-50",children:b("notEligible","Not eligible")})}):null},pe=function(e){var t=(0,m.$)().t;return(0,n.jsx)("div",{className:d()(e.className,"pt-4 pb-2"),children:(0,n.jsx)("span",{className:"font-semibold text-accent-1 text-lg",children:t("pastDraws","Past draws")})})},fe=function(){return(0,n.jsx)("div",{className:"w-full rounded-lg animate-pulse bg-card h-36"})},me=r(66479),xe=function(){return function(e){return(0,k.k)().find((function(t){return t.chainId===e}))}((0,me.SU)().chainId)},be=r(36108),he=r(75263),ve=r(91747),je=r(38758),we=r(58270),ye=r(60314),Oe=r(53738),ge=r(66776),Ne=r(38347),Pe=r(82294),ke=r.n(Pe);function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie,Se,Ce=function(e){var t=e.drawResults,r=e.ticket,a=e.token,i=e.className,o=e.drawData,c=e.drawIdsToNotClaim,l=(e.chainId,e.addDrawIdToClaim),u=e.removeDrawIdToClaim,p=(0,Ne.Z)(e,["drawResults","ticket","token","className","drawData","drawIdsToNotClaim","chainId","addDrawIdToClaim","removeDrawIdToClaim"]),f=t.prizes,m=t.drawId,x=c.has(m);return(0,n.jsxs)("div",{className:d()({"opacity-50":x}),children:[(0,n.jsx)(Ae,{drawResults:t,drawData:o,className:"mb-2",drawIdsToNotClaim:c,addDrawIdToClaim:l,removeDrawIdToClaim:u}),(0,n.jsxs)("ul",ze(ze({},p),{},{className:d()(i,"text-inverse max-h-80 overflow-y-auto space-y-2 pr-2"),children:[!f&&Array.from(Array(3)).map((function(e,t){return(0,n.jsx)(Fe,{},"prize-loading-row-".concat(t))})),null===f||void 0===f?void 0:f.sort(Ee).map((function(t){return(0,s.createElement)(Ze,ze(ze({},e),{},{key:t.pick.toString(),prize:t,token:a,ticket:r,drawData:o}))}))]}))]})},Ee=function(e,t){return function(e,t){var r=e.sub(t);return r.isZero()?0:r.isNegative()?-1:1}(t.amount,e.amount)},Ze=function(e){var t=e.chainId,r=e.prize,s=e.ticket,a=e.drawData.prizeDistribution.tiers,i=r.amount,o=r.distributionIndex,c=(0,m.$)().t,l=a.filter((function(e){return e>0})).indexOf(a[o]),u=(0,T.C)(i,s.decimals).amountPretty;return(0,n.jsx)("li",{className:d()("flex flex-row text-center rounded-lg text-xxs",{"bg-light-purple-10":0!==l,"pool-gradient-3 ":0===l}),children:(0,n.jsxs)("div",{className:d()("flex rounded-lg flex-row w-full justify-between space-x-2 py-2 px-4 sm:px-6",{"bg-actually-black bg-opacity-60":0===l}),children:[(0,n.jsxs)("span",{className:"flex items-center ",children:[(0,n.jsx)("span",{className:"mr-2",children:u})," ",(0,n.jsx)(Oe._,{chainId:t,token:s})]}),(0,n.jsx)("span",{children:"".concat(ke()(l+1)," ").concat(c("tier","Tier")).concat(Te(l))})]})})},Te=function(e){return" \ud83c\udfc6"},Fe=function(){return(0,n.jsx)("li",{className:"w-full h-6 animate-pulse bg-darkened rounded-xl"})},Ae=function(e){var t=e.drawResults,r=e.className,s=e.drawData,a=e.drawIdsToNotClaim,i=e.addDrawIdToClaim,o=e.removeDrawIdToClaim,c=t.drawId,l=s.draw,u=!a.has(c),p=(0,m.$)().t;return(0,n.jsxs)("div",{className:"flex w-full justify-between",children:[(0,n.jsxs)("div",{className:d()(r,"flex flex-col space-y-1 text-xs font-bold"),children:[(0,n.jsx)("span",{className:"text-accent-1 uppercase",children:p("drawNumber",{number:c})}),(0,n.jsx)("span",{className:"text-inverse",children:(0,R.y)(l.beaconPeriodStartedAt.toNumber()+l.beaconPeriodSeconds)})]}),(0,n.jsx)("div",{children:(0,n.jsx)(f.rs,{enabled:u,setEnabled:function(e){e?o(c):i(c)}})})]})},Re=r(19301),Be=r(41725),_e=r(45687),Me=r(8396),We=r(94125),$e=function(e){var t=e.winningDrawResults,r=e.drawDatas,a=e.prizeDistributor,i=e.token,o=e.ticket,l=e.isOpen,u=e.drawIdsToNotClaim,d=e.addDrawIdToClaim,p=e.removeDrawIdToClaim,x=e.closeModal,b=e.claimTx,j=e.setTxId,w=(0,_e.p)(),y=(0,s.useRef)(null),O=(0,me.SU)().chainId,N=(0,m.$)().t,P=(0,ge.C)(O),k=(0,c.b)(),D=(0,g.R)(k,a).refetch,z=function(e){var t=(0,Re._g)(),r=t.isWalletConnected,n=t.provider,a=t.address,i=t.network;return(0,s.useMemo)((function(){if(!(r&&Boolean(a)&&Boolean(e)))return null;var t=n.getSigner();return new Be.vD(e.prizeDistributorMetadata,t,e.contractMetadataList)}),[r,a,e,i])}(a),I=(0,s.useCallback)((0,v.Z)(h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Claim prizes",e.next=3,w({name:"Claim prizes",method:"claim",callTransaction:function(){var e=(0,v.Z)(h().mark((function e(){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.values(t).filter((function(e){return!u.has(e.drawId)})),n={gasLimit:2e5+3e5*r.length},e.abrupt("return",z.claimPrizesAcrossMultipleDrawsByDrawResults(r,n));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),callbacks:{refetch:function(){D()}}});case 3:r=e.sent,j(r);case 5:case"end":return e.stop()}}),e)}))),[z,t,u]);if(!t)return null;if(b&&b.sent)return b.error?(0,n.jsxs)(Me.R,{snapPoints:Me.j,label:"Error depositing modal",open:l,onDismiss:function(){j(0),x()},children:[(0,n.jsx)(we.r,{chainId:O,title:N("errorDepositing","Error depositing")}),(0,n.jsxs)("div",{className:"text-inverse opacity-60",children:[(0,n.jsxs)("p",{className:"my-2 text-center mx-8",children:["\ud83d\ude14 ",N("ohNo","Oh no"),"!"]}),(0,n.jsx)("p",{className:"mb-8 text-center mx-8",children:N("somethingWentWrongWithTx","Something went wrong while processing your transaction.")})]}),(0,n.jsx)(f.LE,{theme:f.kY.tealOutline,className:"w-full",onClick:function(){j(0),x()},children:N("tryAgain","Try again")})]}):(0,n.jsxs)(Me.R,{snapPoints:Me.j,label:"Claim prizes modal",open:l,onDismiss:function(){j(0),x()},children:[(0,n.jsx)(we.r,{chainId:O,title:N("claimSubmitted","Claim submitted")}),(0,n.jsx)(ye.v,{className:"mt-8",chainId:O,tx:b,closeModal:function(){j(0),x()}})]});var S=Object.values(t),C=S.reduce((function(e,t){return u.has(t.drawId)?e:e.add(t.totalValue)}),ve.O$.from(0)),E=(0,T.C)(C,o.decimals).amountPretty;if(!P)return(0,n.jsxs)(Me.R,{snapPoints:Me.j,label:"Wrong network modal",open:l,onDismiss:function(){j(0),x()},children:[(0,n.jsx)(we.r,{chainId:O,title:N("wrongNetwork","Wrong network")}),(0,n.jsx)(je.F,{chainId:O,className:"mt-8"})]});var Z=S.filter((function(e){return!u.has(e.drawId)}));return(0,n.jsx)(Me.R,{snapPoints:Me.j,label:"Claim prizes modal",open:l,onDismiss:function(){j(0),x()},children:(0,n.jsxs)("div",{className:"w-full mx-auto flex flex-col max-h-full",children:[(0,n.jsx)(we.r,{chainId:a.chainId,title:N("claimPrizes","Claim prizes")}),(0,n.jsxs)("div",{className:"flex items-center mx-auto font-bold text-inverse mb-4 text-3xl",children:[(0,n.jsx)("span",{className:"mr-2",children:E}),(0,n.jsx)(Oe._,{chainId:O,token:o})]}),(0,n.jsx)("ul",{className:"space-y-4 overflow-y-auto",style:{maxHeight:"100%"},children:S.reverse().map((function(e){var t=r[e.drawId];return(0,n.jsx)("li",{children:(0,n.jsx)(Ce,{drawIdsToNotClaim:u,addDrawIdToClaim:d,removeDrawIdToClaim:p,chainId:a.chainId,drawResults:e,ticket:o,token:i,drawData:t})},"prize_list_draw_id_".concat(e.drawId))}))}),(0,n.jsx)("div",{className:"mx-auto w-0.5",children:(0,n.jsx)(We.Z,{ref:function(e){return y.current=e},type:"confetti",config:{springAnimation:!1,zIndex:4,colors:["#17e1fd","#4c249f","#ff77e1","#fff177"]},children:(0,n.jsx)("div",{})})}),(0,n.jsx)(f.LE,{className:"mt-8 w-full",onClick:function(){y.current.rewardMe(),I()},theme:f.kY.rainbow,disabled:(null===b||void 0===b?void 0:b.inWallet)&&!b.cancelled&&!b.completed||0===Z.length,children:N("confirmClaim","Confirm claim")})]})})};!function(e){e.loop="LOOP",e.transition="IN"}(Ie||(Ie={})),function(e){e.noPrize="NOPRIZE",e.prize="PRIZE",e.rest="REST",e.reveal="REVEAL"}(Se||(Se={}));var Le=function(e,t,r){return"/videos/PT_Loot_".concat(e,"_").concat(t,"_").concat("v002",".").concat(r)},Ue=function(e){var t=e.checkedState,r=e.didUserWinAPrize,a=e.className,i=e.setCheckedAnimationFinished,o=e.borderRadiusClassName,c=(0,s.useRef)(null),l=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null),f=(0,s.useRef)(null),m=(0,s.useRef)(null),x=(0,s.useRef)(null),b=(0,s.useState)(Se.rest),h=b[0],v=b[1],j=(0,s.useState)(Ie.loop),w=j[0],y=j[1],O=function(e,t){return e!==h||t!==w};return(0,n.jsxs)("div",{className:d()(a,"h-full w-full"),children:[(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.rest,Ie.loop)}),ref:c,playsInline:!0,autoPlay:!0,muted:!0,preload:"auto",onLoadStart:function(){l.current.load()},onEnded:function(){t!==Ct.unchecked?(l.current.play(),u.current.load(),v(Se.reveal),y(Ie.transition)):c.current.play()},children:[(0,n.jsx)("source",{src:Le(Se.rest,Ie.loop,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.rest,Ie.loop,"original.mp4"),type:"video/mp4"})]}),(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.reveal,Ie.transition)}),ref:l,playsInline:!0,muted:!0,onLoadStart:function(){u.current.load()},onEnded:function(){y(Ie.loop),u.current.play(),p.current.load(),m.current.load()},children:[(0,n.jsx)("source",{src:Le(Se.reveal,Ie.transition,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.reveal,Ie.transition,"original.mp4"),type:"video/mp4"})]}),(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.reveal,Ie.loop)}),ref:u,playsInline:!0,muted:!0,onEnded:function(){t===Ct.checking&&void 0===r?u.current.play():(y(Ie.transition),r?(v(Se.prize),m.current.play(),x.current.load()):(v(Se.noPrize),p.current.play(),f.current.load()))},children:[(0,n.jsx)("source",{src:Le(Se.reveal,Ie.loop,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.reveal,Ie.loop,"original.mp4"),type:"video/mp4"})]}),(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.noPrize,Ie.transition)}),ref:p,playsInline:!0,muted:!0,onPlay:function(){return i()},onEnded:function(){y(Ie.loop),f.current.play()},children:[(0,n.jsx)("source",{src:Le(Se.noPrize,Ie.transition,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.noPrize,Ie.transition,"original.mp4"),type:"video/mp4"})]}),(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.noPrize,Ie.loop)}),ref:f,playsInline:!0,muted:!0,onEnded:function(){f.current.play()},children:[(0,n.jsx)("source",{src:Le(Se.noPrize,Ie.loop,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.noPrize,Ie.loop,"original.mp4"),type:"video/mp4"})]}),(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.prize,Ie.transition)}),ref:m,playsInline:!0,muted:!0,onPlay:function(){return i()},onEnded:function(){y(Ie.loop),x.current.play()},children:[(0,n.jsx)("source",{src:Le(Se.prize,Ie.transition,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.prize,Ie.transition,"original.mp4"),type:"video/mp4"})]}),(0,n.jsxs)("video",{className:d()(o,{"h-0":O(Se.prize,Ie.loop)}),ref:x,playsInline:!0,muted:!0,onEnded:function(){x.current.play()},children:[(0,n.jsx)("source",{src:Le(Se.prize,Ie.loop,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Le(Se.prize,Ie.loop,"original.mp4"),type:"video/mp4"})]})]})};Ue.defaultProps={borderRadiusClassName:"rounded-lg"};var Ve,Ye,He=function(){return(0,n.jsx)("div",{className:"draw-card rounded-xl animate-pulse bg-card"})};!function(e){e.loop="LOOP",e.transition="IN"}(Ve||(Ve={})),function(e){e.noPrize="NOPRIZE",e.prize="PRIZE",e.rest="REST",e.reveal="REVEAL"}(Ye||(Ye={}));var Qe=function(e,t,r){return"/videos/PT_Loot_".concat(e,"_").concat(t,"_").concat("v002",".").concat(r)},qe=function(e){var t=e.className,r=e.videoClip,s=e.videoState;return(0,n.jsx)("div",{className:d()(t,"h-full w-full"),children:(0,n.jsxs)("video",{playsInline:!0,autoPlay:!0,muted:!0,loop:!0,preload:"auto",className:"xs:rounded-xl rounded-t-xl",children:[(0,n.jsx)("source",{src:Qe(r,s,"webm"),type:"video/webm"}),(0,n.jsx)("source",{src:Qe(r,s,"original.mp4"),type:"video/mp4"})]})})};qe.defaultProps={className:"",videoClip:Ye.rest,videoState:Ve.loop};var Je=(0,U.atom)([]),Ke=(0,U.atom)(null,(function(e,t,r){var n=e(Je);t(Je,n.filter((function(e){return e!==r})))})),Ge=function(){var e=(0,U.useAtom)(Je);return(0,L.Z)(e,1)[0]},Xe=function(e,t){return e.drawId-t.drawId},et=function(e){var t=e.partialDrawDatas,r=Object.values(t).map((function(e){return e.draw})).sort(Xe),s=r[0],a=r[r.length-1];return 0===r.length?null:1===r.length?(0,n.jsx)("span",{className:e.className,children:(0,R.y)(s.beaconPeriodStartedAt.toNumber()+s.beaconPeriodSeconds)}):(0,n.jsxs)("span",{className:e.className,children:[(0,R.y)(s.beaconPeriodStartedAt.toNumber()+s.beaconPeriodSeconds,{month:"short",day:"numeric"}),(0,n.jsx)("span",{className:"mx-1",children:"-"}),(0,R.y)(a.beaconPeriodStartedAt.toNumber()+a.beaconPeriodSeconds,{month:"short",day:"numeric"})]})};et.defaultProps={className:"uppercase font-bold text-white opacity-70 text-xs leading-none"};var tt=r(21046),rt=r(49321),nt=r(48452),st=function(e){var t=e.drawDatas,r=e.ticket,a=(e.closeModal,(0,m.$)().t),i=Object.keys(t).map(Number),o=(0,s.useState)(i[0]),c=o[0],l=o[1],u=(0,s.useMemo)((function(){if(0===Object.keys(t).length)return null;var e=t[c];return e?e.prizeDistribution:(l(i[0]),t[i[0]].prizeDistribution)}),[c,t]);return 0===Object.keys(t).length?null:(0,n.jsxs)(Me.R,{open:e.isOpen,onDismiss:e.closeModal,label:"Prize breakdown modal",className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"font-semibold font-inter flex items-center justify-center text-xs xs:text-sm sm:text-lg mb-6 space-x-2",children:[(0,n.jsx)("span",{children:a("prizesFrom","Prizes from")}),(0,n.jsx)("select",{name:"drawIds",id:"drawIds",className:d()("font-inter transition border border-accent-4 hover:border-default rounded-lg","px-3 flex flex-row text-xs xs:text-sm hover:text-inverse bg-tertiary"),onChange:function(e){return l(Number(e.target.value))},children:i.map((function(e){return(0,n.jsx)("option",{value:e,children:a("drawNumber",{number:e})},e)}))})]}),(0,n.jsx)(nt.q,{className:"mx-auto"}),(0,n.jsx)(rt.A,{className:"w-full mx-auto",prizeTier:u,ticket:r})]})},at=function(e){var t=e.drawDatas,r=e.label,a=e.ticket,i=e.textClassName,o=e.className,c=(0,s.useState)(!1),l=c[0],u=c[1],f=(0,m.$)().t;return t&&0!==Object.keys(t).length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{className:d()(o,i,"flex items-center"),onClick:function(){return u(!0)},children:[r||f("viewPrizeTiers","View prize tiers"),(0,n.jsx)(p.Z,{icon:"chevron-right",className:"w-4 h-4 ml-1"})]}),(0,n.jsx)(st,{drawDatas:t,ticket:a,isOpen:l,closeModal:function(){return u(!1)}})]}):null};function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}at.defaultProps={textClassName:"uppercase font-bold text-xxs sm:text-xs opacity-70 hover:opacity-100 transition leading-none tracking-wide"};var ct=function(e){var t=e.className,r=e.drawDatas,s=(0,Ne.Z)(e,["className","drawDatas"]);return(0,n.jsx)("div",{className:d()("w-full flex flex-col",t),children:(0,n.jsxs)("div",{className:"flex flex-col xs:flex-row justify-between leading-none",children:[(0,n.jsxs)("span",{className:"flex items-start",children:[(0,n.jsx)(ut,ot(ot({},s),{},{partialDrawDatas:r})),(0,n.jsx)(et,ot(ot({},s),{},{partialDrawDatas:r}))]}),(0,n.jsxs)("span",{className:"flex xs:flex-col flex-col-reverse items-start xs:items-end ",children:[(0,n.jsx)(at,ot(ot({className:"mt-2 xs:mt-0 text-white"},s),{},{drawDatas:r})),(0,n.jsx)(lt,ot(ot({className:"mt-2"},s),{},{drawDatas:r}))]})]})})},lt=function(e){var t=(0,m.$)().t,r=e.drawDatas,s=e.token;if(!r)return null;var a=Object.values(r).reduce((function(e,t){return e.add(t.prizeDistribution.prize)}),tt._Y),i=(0,T.C)(a,s.decimals).amountPretty;return(0,n.jsxs)("div",{className:e.className,children:[(0,n.jsxs)("span",{className:e.numberClassName,children:["$",i]}),(0,n.jsx)("span",{className:e.textClassName,children:t("inPrizes","in prizes")})]})};lt.defaultProps={numberClassName:"font-bold text-white text-xs xs:text-sm",textClassName:"font-bold text-white text-xxs xs:text-xs ml-1 opacity-60"};var ut=function(e){var t=(0,m.$)().t,r=e.partialDrawDatas,s=e.className,a=Object.keys(r);return 0===a.length?null:1===a.length?(0,n.jsxs)("span",{className:s,children:["#",a[0]]}):(0,n.jsx)("span",{className:s,children:t("multipleDraws","Multiple draws")})};ut.defaultProps={className:"uppercase font-bold text-white mr-2 opacity-50 text-xs leading-none"};var dt=r(9414),pt=function(e){var t=e.prizeDistributor,r=e.ticket,s=e.token,a=function(e){var t=Ge(),r=S().isFetched,n=y(e),s=n.data;if(!n.isFetched||!r)return null;var a={};return 0===t.length||t.forEach((function(e){var t=s[e];t&&(a[e]={draw:t.draw,prizeDistribution:t.prizeDistribution})})),a}(t),i=function(e){var t=y(e),r=t.data;if(!t.isFetched)return{data:null,isFetched:!1};var n={};return Object.keys(r).map(Number).forEach((function(e){var t=r[e];t.prizeDistribution||(n[e]={draw:t.draw})})),{data:n,isFetched:!0}}(t),o=i.data,c=i.isFetched;if(!a||!c)return(0,n.jsx)(He,{});if(Object.keys(o).length>0)return(0,n.jsx)(bt,{draws:o});var l=Object.values(a);return 0===l.length?(0,n.jsx)(xt,{}):(0,n.jsxs)(f.Zb,{className:"draw-card",paddingClassName:"",children:[(0,n.jsx)(qe,{className:"absolute inset-0"}),(0,n.jsx)(ft,{partialDrawDatas:a,token:s,ticket:r,className:"absolute top-4 xs:top-8 left-0 px-4 xs:px-8"}),(0,n.jsx)(mt,{firstLockDrawId:l[0].draw.drawId,className:"absolute bottom-4 left-0 right-0 xs:top-14 xs:bottom-auto xs:left-auto xs:right-auto px-4 xs:px-8 flex justify-center"})]})},ft=function(e){var t=e.className,r=e.partialDrawDatas,s=e.token,a=e.ticket,i={};return Object.keys(r).forEach((function(e){var t=Number(e),n=r[t];n.prizeDistribution&&(i[t]={draw:n.draw,prizeDistribution:n.prizeDistribution})})),(0,n.jsxs)("div",{className:d()(t,"flex flex-col xs:flex-row justify-between leading-none xs:w-full"),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(ut,{partialDrawDatas:r}),(0,n.jsx)(et,{partialDrawDatas:r})]}),(0,n.jsxs)("span",{className:"flex xs:flex-col flex-col-reverse items-start xs:items-end ",children:[(0,n.jsx)(at,{className:"mt-2 xs:mt-0",ticket:a,drawDatas:i}),(0,n.jsx)(lt,{className:"mt-2",token:s,drawDatas:i})]})]})},mt=function(e){var t=e.className,r=e.firstLockDrawId,s=S(),a=s.data,i=s.isFetched,o=null===a||void 0===a?void 0:a[r],c=(0,E.l)(null===o||void 0===o?void 0:o.endTimeSeconds.toNumber()).secondsLeft;return i?(0,n.jsx)("div",{className:d()(t),children:(0,n.jsx)(dt.q,{seconds:c,backgroundColorClassName:"bg-pt-purple-lighter bg-opacity-20",unitsColorClassName:"text-pt-purple-lighter text-opacity-40"})}):(0,n.jsx)("div",{className:"bg-new-modal animate-pulse"})},xt=function(e){var t=(0,m.$)().t;return(0,n.jsxs)(f.Zb,{className:"draw-card",paddingClassName:"",children:[(0,n.jsx)(qe,{className:"absolute inset-0"}),(0,n.jsxs)("div",{className:"absolute bottom-4 left-0 right-0 xs:top-8 xs:bottom-auto xs:left-auto xs:right-auto px-4 xs:px-8 flex flex-col text-center xs:text-left",children:[(0,n.jsx)("span",{className:"text-lg text-inverse",children:t("noDrawsToCheckNoDeposits")}),(0,n.jsx)("span",{className:"",children:t("comeBackSoon")})]})]})},bt=function(e){var t=e.draws,r=(0,m.$)().t;return(0,n.jsxs)(f.Zb,{className:"draw-card",paddingClassName:"",children:[(0,n.jsx)(qe,{className:"absolute inset-0"}),(0,n.jsx)("div",{className:d()("flex flex-col xs:flex-row justify-between leading-none xs:w-full absolute top-4 xs:top-8 left-0 px-4 xs:px-8"),children:(0,n.jsxs)("div",{children:[(0,n.jsx)(ut,{partialDrawDatas:t}),(0,n.jsx)(et,{partialDrawDatas:t})]})}),(0,n.jsx)("div",{className:"absolute bottom-6 left-0 right-0 xs:top-14 xs:bottom-auto xs:left-auto xs:right-auto px-4 xs:px-8 flex flex-col text-center",children:(0,n.jsx)("div",{className:"font-bold text-white text-xs xs:text-sm opacity-90 mx-auto flex flex-col justify-center",children:(0,n.jsxs)(f.u,{id:"tooltip-what-is-propagating",tip:r("propagatingMeans","There is a 24 hour cooldown while the prize is being distributed to all networks. You can check if you won this prize 24 hours after the draw."),className:"flex items-center",children:[(0,n.jsx)(f.kW,{size:10,className:"mr-2"})," ",(0,n.jsxs)("span",{className:"uppercase flex items-center",children:[" ",(0,n.jsxs)("span",{className:"border-default border-dotted border-b-2",children:[" ",r("propagating","Propagating ...")," "]}),(0,n.jsx)(p.Z,{icon:"help-circle",className:"relative w-4 h-4 text-white ml-2"})]})]})})})]})};function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yt=function(e){var t=(0,P.H)(),r=t.data,n=t.isFetched,s=(0,w.Ij)(e),a=s.data,i=s.isFetched,o=function(e){var t=(0,P.H)(),r=t.data,n=t.isFetched,s=(0,B.K6)(e),a=s.data,i=s.isFetched,o=n&&i&&Boolean(e),c=null===a||void 0===a?void 0:a.drawIds;return(0,j.useQuery)(["useValidPrizeDistributions",null===e||void 0===e?void 0:e.id(),null===r||void 0===r?void 0:r.startedAtSeconds.toString()],(0,v.Z)(h().mark((function t(){var r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPrizeDistributions(c);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),vt(vt({},D.u),{},{enabled:o}))}(e),c=o.data,l=o.isFetched,u=null===a||void 0===a?void 0:a.draws,d=Boolean(e)&&n&&i&&l;return(0,j.useQuery)(["useValidDrawDatas",null===e||void 0===e?void 0:e.id(),null===r||void 0===r?void 0:r.startedAtSeconds.toString()],(0,v.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},Object.keys(u).map(Number).forEach((function(e){t[e]={draw:u[e],prizeDistribution:c[e]}})),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),wt(wt({},D.u),{},{enabled:d}))};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Nt=function(e,t){var r=Ge(),n=S().isFetched,s=yt(t),a=s.data,i=s.isFetched,o=ne(e,t),c=W(e,t),l=c.data,u=c.isFetched,d=(0,g.R)(e,t),p=d.data,f=d.isFetched,m=null===o||void 0===o?void 0:o[e],x=null===l||void 0===l?void 0:l[e],b=null===p||void 0===p?void 0:p.claimedAmounts,w=null===p||void 0===p?void 0:p.usersAddress,y=Boolean(m)&&Boolean(x)&&w===e,O=Boolean(t)&&n&&i&&u&&f&&y,N=r?"lockedDraws-"+r.join(","):"",P=b?"claimedAmounts-"+Object.values(b).map((function(e){return e.amount})).join(","):"",k=x?"normalizedBalances-"+Object.values(x).map((function(e){return e.toString()})).join(","):"",z=a?"drawDatas-"+Object.keys(a).join(","):"";return(0,j.useQuery)(["useUsersUnclaimedDrawDatas",null===t||void 0===t?void 0:t.id(),e,N,P,k,z],(0,v.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Pt(e,r,a,x,b,m));case 1:case"end":return t.stop()}}),t)}))),gt(gt({},D.u),{},{enabled:O}))},Pt=function(){var e=(0,v.Z)(h().mark((function e(t,r,n,s,a,i){var o,c,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},c=Object.keys(n).map(Number),console.log("getUnclaimedDrawDatas",{drawDatas:n}),u=(0,N.msToS)(Date.now()),c.forEach((function(e){var t=n[e],c=a[e],l=s[e],d=r.includes(e),p=null===i||void 0===i?void 0:i[e],f=t.draw,m=t.prizeDistribution,x=f.timestamp.toNumber(),b=m.expiryDuration+x;!c.amountUnformatted.isZero()||l.isZero()||d||Boolean(p)&&p.totalValue.isZero()||b<=u||(o[e]=t)})),e.abrupt("return",(0,l.Z)({},t,o));case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,s,a,i){return e.apply(this,arguments)}}();function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zt=function(e,t){var r=function(e,t){var r=Nt(e,t),n=r.data,s=r.isFetched,a=(0,Ne.Z)(r,["data","isFetched"]);if(!s)return Dt({data:null,isFetched:s},a);var i=n[e];return Dt({data:i?Object.keys(i).map(Number):null,isFetched:s},a)}(e,t),n=r.data,a=r.isFetched,i=(0,g.R)(e,t),o=i.data,c=i.isFetched,u=W(e,t),d=u.data,p=u.isFetched;return(0,s.useMemo)((function(){if(!a||!e||!c||!t||!p||e!==o.usersAddress)return{data:null,isFetched:!1};var r=o.claimedAmounts,s=d[e];if(!r||!s)return{data:null,isFetched:!1};var i=ee(e,t),u=[];Object.keys(r).forEach((function(e){r[e].amountUnformatted.isZero()||u.push(Number(e))}));var f=Object.keys(i).map(Number),m=[];Object.keys(s).map(Number).forEach((function(e){s[e].isZero()&&m.push(e)}));var x=n.every((function(e){return f.includes(e)||u.includes(e)||m.includes(e)}));return console.log({hasUserCheckedAllDraws:x,drawIds:n,drawResults:i}),{data:(0,l.Z)({},e,x),isFetched:!0}}),[e,c,a,p,o,n,d,null===t||void 0===t?void 0:t.id()])};function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ct,Et=function(e){var t=e.prizePool,r=e.prizeDistributor,s=(0,x.LA)(t),a=s.data,i=s.isFetched,o=(0,c.b)(),l=Nt(o,r),u=l.data,d=l.isFetched,p=zt(o,r),m=p.data,b=p.isFetched;if(!i||!d||!b)return(0,n.jsx)(He,{});var h=u[o],v=m[o];return Boolean(h)&&0===Object.keys(h).length?(0,n.jsx)(pt,{prizeDistributor:r,token:a.token,ticket:a.ticket}):v?(0,n.jsx)(Tt,St(St({},e),{},{drawDatas:h,token:a.token,ticket:a.ticket})):(0,n.jsx)("div",{children:(0,n.jsx)(f.Zb,{className:"draw-card",paddingClassName:"",children:(0,n.jsx)(Zt,St(St({},e),{},{drawDatas:h,token:a.token,ticket:a.ticket}))})})};!function(e){e[e.unchecked=0]="unchecked",e[e.checking=1]="checking",e[e.checked=2]="checked"}(Ct||(Ct={}));var Zt=function(e){var t=e.drawDatas,r=e.ticket,a=e.token,i=(0,s.useState)(Ct.unchecked),o=i[0],c=i[1],l=(0,s.useState)(null),u=l[0],d=l[1],p=(0,U.useAtom)(K),f=(0,L.Z)(p,2),m=f[0],x=f[1],b=Boolean(u)?Object.keys(u).length>0:void 0,h=(0,s.useState)(!1),v=h[0],j=h[1],w=(0,s.useState)(!1),y=w[0],O=w[1],g=(0,s.useState)(0),N=g[0],P=g[1],k=(0,he.useTransaction)(N);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ue,{didUserWinAPrize:b,setCheckedAnimationFinished:function(){return j(!0)},checkedState:o,className:"absolute inset-0"}),(0,n.jsx)(ct,{drawDatas:t,token:a,ticket:r,className:"absolute top-4 xs:top-8 left-0 px-4 xs:px-8"}),(0,n.jsx)("div",{className:"absolute bottom-4 left-0 right-0 xs:top-14 xs:bottom-auto xs:left-auto xs:right-auto px-4 xs:px-8",children:(0,n.jsx)(Ft,St(St({},e),{},{hasCheckedAnimationFinished:v,didUserWinAPrize:b,setWinningDrawResults:d,checkedState:o,setCheckedState:c,openModal:function(){return O(!0)},claimTx:k,className:"flex items-center text-center mx-auto xs:mx-0 w-full sm:w-auto"}))}),(0,n.jsx)($e,St(St({},e),{},{setTxId:P,claimTx:k,drawIdsToNotClaim:m,addDrawIdToClaim:function(e){x((function(t){var r=new Set(t);return r.add(e),r}))},removeDrawIdToClaim:function(e){x((function(t){var r=new Set(t);return r.delete(e),r}))},winningDrawResults:u,isOpen:y,closeModal:function(){return O(!1)}}))]})},Tt=function(e){var t=e.drawDatas,r=e.prizeDistributor,a=e.ticket,i=e.token,o=(0,m.$)().t,u=(0,c.b)(),d=(0,U.useAtom)(K),p=(0,L.Z)(d,2),x=p[0],b=p[1],h=function(e,t){var r=(0,g.R)(e,t),n=r.data,a=r.isFetched,i=ne(e,t),o=null===i||void 0===i?void 0:i[e];return(0,s.useMemo)((function(){if(!a||!e||!t||e!==n.usersAddress)return{data:null,isFetched:!1};var r=n.claimedAmounts,s={};return Object.keys(o).map(Number).forEach((function(e){var t=r[e],n=o[e];t.amountUnformatted.isZero()&&!n.totalValue.isZero()&&(s[e]=n)})),{data:(0,l.Z)({},e,s),isFetched:!0}}),[null===t||void 0===t?void 0:t.id(),e,n,o])}(u,r),v=h.data,j=h.isFetched,w=null===v||void 0===v?void 0:v[u],y=(0,s.useMemo)((function(){if(!w)return null;var e=Object.keys(w).map(Number),r={};return e.forEach((function(e){r[e]=t[e]})),r}),[w,t]),O=(0,s.useState)(!1),N=O[0],P=O[1],k=(0,s.useState)(0),D=k[0],z=k[1],I=(0,he.useTransaction)(D);return j?w&&0!==Object.keys(w).length?(0,n.jsxs)(f.Zb,{className:"draw-card",paddingClassName:"",children:[(0,n.jsx)(qe,{videoClip:Ye.prize,className:"absolute inset-0"}),(0,n.jsx)(ct,{drawDatas:y,token:i,ticket:a,className:"absolute top-4 xs:top-8 left-0 px-4 xs:px-8"}),(0,n.jsx)("div",{className:"absolute bottom-4 left-0 right-0 xs:top-14 xs:bottom-auto xs:left-auto xs:right-auto px-4 xs:px-8",children:(0,n.jsx)(f.LE,{theme:f.kY.rainbow,size:f.rZ.md,onClick:function(){return P(!0)},className:"mx-auto xs:mx-0 w-full sm:w-auto",style:{minWidth:230},children:o("viewPrizes","View prizes")})}),(0,n.jsx)($e,St(St({},e),{},{setTxId:z,claimTx:I,drawIdsToNotClaim:x,addDrawIdToClaim:function(e){b((function(t){var r=new Set(t);return r.add(e),r}))},removeDrawIdToClaim:function(e){b((function(t){var r=new Set(t);return r.delete(e),r}))},winningDrawResults:w,isOpen:N,closeModal:function(){return P(!1)}}))]}):(0,n.jsx)(pt,{prizeDistributor:r,token:i,ticket:a}):null},Ft=function(e){var t,r,s=e.checkedState,a=e.claimTx,i=e.didUserWinAPrize,o=e.prizeDistributor,l=e.drawDatas,u=e.className,d=e.size,p=e.hasCheckedAnimationFinished,x=e.setWinningDrawResults,b=e.setCheckedState,h=e.openModal,v=(0,c.b)(),j=(0,m.$)().t,w=(0,U.useAtom)(X),y=(0,L.Z)(w,2),O=(y[0],y[1]),g=(l?Object.values(l):[]).map((function(e){return e.draw}));if(null!==a&&void 0!==a&&a.hash&&(r=(0,f.GN)(a.hash,a.ethersTx.chainId)),null!==a&&void 0!==a&&a.inFlight)t=(0,n.jsxs)(f._8,{target:"_blank",href:r,theme:f.kY.teal,size:d,className:u,children:[(0,n.jsx)(f.kW,{className:"mr-2",size:12}),j("claiming","Claiming")]});else if(null===a||void 0===a||!a.completed||null!==a&&void 0!==a&&a.error||null!==a&&void 0!==a&&a.cancelled)if(s===Ct.checked&&i&&p)t=(0,n.jsx)(f.LE,{theme:f.kY.rainbow,size:d,onClick:function(){return h()},className:u,style:{minWidth:230},children:j("viewPrizes","View prizes")});else if(s===Ct.checked&&!i&&p)t=(0,n.jsx)(f.LE,{size:d,disabled:!0,className:u,children:j("noPrizesToClaim","No prizes to claim")});else{var N=s!==Ct.unchecked;t=(0,n.jsx)(f.LE,{size:d,onClick:function(){return At(o,g,v,x,b,O)},disabled:N,className:u,style:{minWidth:230},children:N?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.kW,{size:12,className:"mr-2"}),j("checkingForPrizes","Checking for prizes")]}):j("checkForPrizes","Check for prizes")})}else t=(0,n.jsx)(f._8,{target:"_blank",href:r,theme:f.kY.tealOutline,size:d,className:u,children:j("viewReceipt","View receipt")});return(0,n.jsx)("div",{className:"flex items-center relative",children:t})};Ft.defaultProps={size:f.rZ.md};var At=function(){var e=(0,v.Z)(h().mark((function e(t,r,n,s,a,i){var o,c,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Ct.checking),o=ee(n,t),c={},l={},u=r.map(function(){var e=(0,v.Z)(h().mark((function e(r){var s,a,i,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=o[r.drawId])){e.next=5;break}s=a,e.next=23;break;case 5:return e.prev=5,i=Rt(t.chainId,t.address,n,r.drawId),e.next=9,fetch(i);case 9:return u=e.sent,e.next=12,u.json();case 12:d=e.sent,s=(0,N.deserializeBigNumbers)(d),e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(5),console.log(e.t0.message),e.next=21,t.calculateUsersPrizes(n,r);case 21:s=e.sent;case 22:l[r.drawId]=s;case 23:s.totalValue.isZero()||(c[r.drawId]=s);case 24:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(u);case 7:re(n,t,l,i),s(c),a(Ct.checked);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n,s,a,i){return e.apply(this,arguments)}}(),Rt=function(e,t,r,n){return"https://tsunami-prizes-production.pooltogether-api.workers.dev/".concat(e,"/").concat(t,"/prizes/").concat(r,"/").concat(n,"/")},Bt=function(){!function(){var e=S().data,t=(0,U.useAtom)(Je),r=(0,L.Z)(t,2)[1],n=(0,U.useAtom)(Ke),a=(0,L.Z)(n,2)[1];(0,s.useEffect)((function(){var t=e&&Object.keys(e).map(Number);if(e&&0!==t.length){var n=[],s=[];return t.forEach((function(t){var r=e[t].endTimeSeconds.toNumber(),i=Math.round((0,N.msToS)(Date.now()));if(r>i){n.push(t);var o=(0,N.sToMs)(r-i),c=setTimeout((function(){a(t)}),o);s.push(c)}})),r(n),function(){s.forEach((function(e){return clearTimeout(e)}))}}r([])}),[e])}();var e=xe(),t=(0,i.H)(),r=(0,c.b)(),a=(0,x.LA)(t),l=a.data,u=a.isFetched;return Boolean(e)&&t&&u?r?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.R,{className:"flex flex-col",children:[(0,n.jsx)(_t,{prizePool:t,prizeDistributor:e,className:"mb-6"}),(0,n.jsx)(Et,{prizePool:t,prizeDistributor:e}),(0,n.jsx)(ie,{prizeDistributor:e,prizePool:t,className:"mt-8"})]})}):(0,n.jsxs)(o.R,{className:"flex flex-col",children:[(0,n.jsx)(_t,{prizePool:t,prizeDistributor:e,className:"mb-6"}),(0,n.jsx)(pt,{prizeDistributor:e,token:null===l||void 0===l?void 0:l.token,ticket:null===l||void 0===l?void 0:l.ticket}),(0,n.jsx)(ie,{prizeDistributor:e,prizePool:t,className:"mt-8"})]}):(0,n.jsxs)(o.R,{className:"flex flex-col",children:[(0,n.jsx)(_t,{prizePool:t,prizeDistributor:e,className:"mb-6"}),(0,n.jsx)(He,{})]})},_t=function(e){var t=e.className,r=(0,m.$)().t;return(0,n.jsxs)("div",{className:d()("font-semibold font-inter flex items-center justify-center text-xs xs:text-sm sm:text-lg",t),children:[(0,n.jsx)("span",{children:r("prizesOn","Prizes on")}),(0,n.jsx)(be.d,{className:"network-dropdown ml-1 xs:ml-2"})]})};function Mt(e){return(0,n.jsx)(a.Z,{children:(0,n.jsx)(Bt,{})})}},50171:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/prizes",function(){return r(41559)}])},82294:function(e,t,r){var n=r(95326);function s(e){if("number"!==typeof e)throw new TypeError("Expected Number, got "+typeof e+" "+e);return Number.isFinite(e)?e+n(e):e}s.indicator=n,e.exports=s},95326:function(e){e.exports=function(e){var t=(e=Math.abs(e))%100;if(t>=10&&t<=20)return"th";var r=e%10;return 1===r?"st":2===r?"nd":3===r?"rd":"th"}},66973:function(e){e.exports="/_next/static/images/prize-w-laurels@2x-4b10817a6c544b7ed6da9a790fa11ccd.png"}},function(e){e.O(0,[5390,215,3181,2808,9774,2888,179],(function(){return t=50171,e(e.s=t);var t}));var t=e.O();_N_E=t}]);